
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Google Cloud Vertex AI SDK.">
      
      
      
        <link rel="canonical" href="https://github.com/googleapis/python-aiplatform/vertexai/preview/vision_models/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
      
        <title>Vision models - Vertex SDK</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vertexai.preview.vision_models" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Vertex SDK" class="md-header__button md-logo" aria-label="Vertex SDK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vertex SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Vision models
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/googleapis/python-aiplatform" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    googleapis/python-aiplatform
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../generative_models/" class="md-tabs__link">
        
  
    
  
  Generative models

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../language_models/" class="md-tabs__link">
        
  
    
  
  Language models

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../vision_models/" class="md-tabs__link">
        
  
    
  
  Vision models

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Vertex SDK" class="md-nav__button md-logo" aria-label="Vertex SDK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Vertex SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/googleapis/python-aiplatform" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    googleapis/python-aiplatform
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generative_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generative models
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language models
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vision_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vision models
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models" class="md-nav__link">
    <span class="md-ellipsis">
      vision_models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.GeneratedImage" class="md-nav__link">
    <span class="md-ellipsis">
      GeneratedImage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GeneratedImage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.GeneratedImage.generation_parameters" class="md-nav__link">
    <span class="md-ellipsis">
      generation_parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.GeneratedImage.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.GeneratedImage.load_from_file" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.GeneratedImage.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Image" class="md-nav__link">
    <span class="md-ellipsis">
      Image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Image.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Image.load_from_file" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Image.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Image.show" class="md-nav__link">
    <span class="md-ellipsis">
      show
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageCaptioningModel" class="md-nav__link">
    <span class="md-ellipsis">
      ImageCaptioningModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageCaptioningModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageCaptioningModel.get_captions" class="md-nav__link">
    <span class="md-ellipsis">
      get_captions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageGenerationModel" class="md-nav__link">
    <span class="md-ellipsis">
      ImageGenerationModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageGenerationModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageGenerationModel.edit_image" class="md-nav__link">
    <span class="md-ellipsis">
      edit_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageGenerationModel.generate_images" class="md-nav__link">
    <span class="md-ellipsis">
      generate_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageGenerationModel.upscale_image" class="md-nav__link">
    <span class="md-ellipsis">
      upscale_image
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageGenerationResponse" class="md-nav__link">
    <span class="md-ellipsis">
      ImageGenerationResponse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageGenerationResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageGenerationResponse.__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      __getitem__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageGenerationResponse.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageQnAModel" class="md-nav__link">
    <span class="md-ellipsis">
      ImageQnAModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageQnAModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageQnAModel.ask_question" class="md-nav__link">
    <span class="md-ellipsis">
      ask_question
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.ImageTextModel" class="md-nav__link">
    <span class="md-ellipsis">
      ImageTextModel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.MultiModalEmbeddingModel" class="md-nav__link">
    <span class="md-ellipsis">
      MultiModalEmbeddingModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MultiModalEmbeddingModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.MultiModalEmbeddingModel.get_embeddings" class="md-nav__link">
    <span class="md-ellipsis">
      get_embeddings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.MultiModalEmbeddingResponse" class="md-nav__link">
    <span class="md-ellipsis">
      MultiModalEmbeddingResponse
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Video" class="md-nav__link">
    <span class="md-ellipsis">
      Video
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Video">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Video.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Video.load_from_file" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.Video.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.VideoEmbedding" class="md-nav__link">
    <span class="md-ellipsis">
      VideoEmbedding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VideoEmbedding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.VideoEmbedding.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.VideoSegmentConfig" class="md-nav__link">
    <span class="md-ellipsis">
      VideoSegmentConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VideoSegmentConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.VideoSegmentConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.WatermarkVerificationModel" class="md-nav__link">
    <span class="md-ellipsis">
      WatermarkVerificationModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WatermarkVerificationModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vertexai.preview.vision_models.WatermarkVerificationModel.verify_image" class="md-nav__link">
    <span class="md-ellipsis">
      verify_image
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Vision models</h1>

<div class="doc doc-object doc-module">



<a id="vertexai.preview.vision_models"></a>
    <div class="doc doc-contents first">

      <p>Classes for working with vision models.</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.GeneratedImage" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">GeneratedImage</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a></code></p>


      <p>Generated image.</p>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">GeneratedImage</span><span class="p">(</span><span class="n">Image</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generated image.&quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.preview.vision_models&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span>
        <span class="n">generation_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a `GeneratedImage` object.</span>

<span class="sd">        Args:</span>
<span class="sd">            image_bytes: Image file bytes. Image can be in PNG or JPEG format.</span>
<span class="sd">            generation_parameters: Image generation parameter values.</span>
<span class="sd">            gcs_uri: Image file Google Cloud Storage uri.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">image_bytes</span><span class="o">=</span><span class="n">image_bytes</span><span class="p">,</span> <span class="n">gcs_uri</span><span class="o">=</span><span class="n">gcs_uri</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_generation_parameters</span> <span class="o">=</span> <span class="n">generation_parameters</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">generation_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Image generation parameters as a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generation_parameters</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;GeneratedImage&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads image from file.</span>

<span class="sd">        Args:</span>
<span class="sd">            location: Local path from where to load the image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Loaded image as a `GeneratedImage` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="n">exif</span> <span class="o">=</span> <span class="n">base_image</span><span class="o">.</span><span class="n">_pil_image</span><span class="o">.</span><span class="n">getexif</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="n">exif_comment_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">exif</span><span class="p">[</span><span class="n">_EXIF_USER_COMMENT_TAG_IDX</span><span class="p">])</span>
        <span class="n">generation_parameters</span> <span class="o">=</span> <span class="n">exif_comment_dict</span><span class="p">[</span><span class="n">_IMAGE_GENERATION_PARAMETERS_EXIF_KEY</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">GeneratedImage</span><span class="p">(</span>
            <span class="n">image_bytes</span><span class="o">=</span><span class="n">base_image</span><span class="o">.</span><span class="n">_image_bytes</span><span class="p">,</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="n">generation_parameters</span><span class="o">=</span><span class="n">generation_parameters</span><span class="p">,</span>
            <span class="n">gcs_uri</span><span class="o">=</span><span class="n">base_image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">,</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">include_generation_parameters</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves image to a file.</span>

<span class="sd">        Args:</span>
<span class="sd">            location: Local path where to save the image.</span>
<span class="sd">            include_generation_parameters: Whether to include the image</span>
<span class="sd">                generation parameters in the image&#39;s EXIF metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">include_generation_parameters</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generation_parameters</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Image does not have generation parameters.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">PIL_Image</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The PIL module is required for saving generation parameters.&quot;</span>
                <span class="p">)</span>

            <span class="n">exif</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pil_image</span><span class="o">.</span><span class="n">getexif</span><span class="p">()</span>
            <span class="n">exif</span><span class="p">[</span><span class="n">_EXIF_USER_COMMENT_TAG_IDX</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
                <span class="p">{</span><span class="n">_IMAGE_GENERATION_PARAMETERS_EXIF_KEY</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generation_parameters</span><span class="p">}</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pil_image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">exif</span><span class="o">=</span><span class="n">exif</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="vertexai.preview.vision_models.GeneratedImage.generation_parameters" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">generation_parameters</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">generation_parameters</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Image generation parameters as a dictionary.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.GeneratedImage.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
    <span class="nf">image_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span>
    <span class="n">generation_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>image_bytes</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Image file bytes. Image can be in PNG or JPEG format.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[bytes]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>generation_parameters</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Image generation parameter values.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>gcs_uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Image file Google Cloud Storage uri.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span>
    <span class="n">generation_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a `GeneratedImage` object.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_bytes: Image file bytes. Image can be in PNG or JPEG format.</span>
<span class="sd">        generation_parameters: Image generation parameter values.</span>
<span class="sd">        gcs_uri: Image file Google Cloud Storage uri.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">image_bytes</span><span class="o">=</span><span class="n">image_bytes</span><span class="p">,</span> <span class="n">gcs_uri</span><span class="o">=</span><span class="n">gcs_uri</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_generation_parameters</span> <span class="o">=</span> <span class="n">generation_parameters</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.GeneratedImage.load_from_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_from_file</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeneratedImage</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Loads image from file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>location</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Local path from where to load the image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.GeneratedImage" href="#vertexai.preview.vision_models.GeneratedImage">GeneratedImage</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Loaded image as a <code class="language-python highlight"><span class="n">GeneratedImage</span></code> object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;GeneratedImage&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads image from file.</span>

<span class="sd">    Args:</span>
<span class="sd">        location: Local path from where to load the image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Loaded image as a `GeneratedImage` object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base_image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="n">exif</span> <span class="o">=</span> <span class="n">base_image</span><span class="o">.</span><span class="n">_pil_image</span><span class="o">.</span><span class="n">getexif</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
    <span class="n">exif_comment_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">exif</span><span class="p">[</span><span class="n">_EXIF_USER_COMMENT_TAG_IDX</span><span class="p">])</span>
    <span class="n">generation_parameters</span> <span class="o">=</span> <span class="n">exif_comment_dict</span><span class="p">[</span><span class="n">_IMAGE_GENERATION_PARAMETERS_EXIF_KEY</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">GeneratedImage</span><span class="p">(</span>
        <span class="n">image_bytes</span><span class="o">=</span><span class="n">base_image</span><span class="o">.</span><span class="n">_image_bytes</span><span class="p">,</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="n">generation_parameters</span><span class="o">=</span><span class="n">generation_parameters</span><span class="p">,</span>
        <span class="n">gcs_uri</span><span class="o">=</span><span class="n">base_image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">,</span>  <span class="c1"># pylint: disable=protected-access</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.GeneratedImage.save" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">save</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">save</span><span class="p">(</span>
    <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">include_generation_parameters</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Saves image to a file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>location</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Local path where to save the image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>include_generation_parameters</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether to include the image
generation parameters in the image's EXIF metadata.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>bool</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">include_generation_parameters</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Saves image to a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        location: Local path where to save the image.</span>
<span class="sd">        include_generation_parameters: Whether to include the image</span>
<span class="sd">            generation parameters in the image&#39;s EXIF metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">include_generation_parameters</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generation_parameters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Image does not have generation parameters.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PIL_Image</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The PIL module is required for saving generation parameters.&quot;</span>
            <span class="p">)</span>

        <span class="n">exif</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pil_image</span><span class="o">.</span><span class="n">getexif</span><span class="p">()</span>
        <span class="n">exif</span><span class="p">[</span><span class="n">_EXIF_USER_COMMENT_TAG_IDX</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
            <span class="p">{</span><span class="n">_IMAGE_GENERATION_PARAMETERS_EXIF_KEY</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generation_parameters</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pil_image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">exif</span><span class="o">=</span><span class="n">exif</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.Image" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Image</span>


</h2>


    <div class="doc doc-contents ">


      <p>Image.</p>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Image</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Image.&quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="n">_loaded_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_loaded_image</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;PIL_Image.Image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an `Image` object.</span>

<span class="sd">        Args:</span>
<span class="sd">            image_bytes: Image file bytes. Image can be in PNG or JPEG format.</span>
<span class="sd">            gcs_uri: Image URI in Google Cloud Storage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">image_bytes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">(</span><span class="n">gcs_uri</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either image_bytes or gcs_uri must be provided.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_image_bytes</span> <span class="o">=</span> <span class="n">image_bytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span> <span class="o">=</span> <span class="n">gcs_uri</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Image&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads image from local file or Google Cloud Storage.</span>

<span class="sd">        Args:</span>
<span class="sd">            location: Local path or Google Cloud Storage uri from where to load</span>
<span class="sd">                the image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Loaded image as an `Image` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;https&quot;</span>
            <span class="ow">and</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">netloc</span> <span class="o">==</span> <span class="s2">&quot;storage.googleapis.com&quot;</span>
        <span class="p">):</span>
            <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span>
                <span class="n">scheme</span><span class="o">=</span><span class="s2">&quot;gs&quot;</span><span class="p">,</span> <span class="n">netloc</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">path</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlunparse</span><span class="p">(</span><span class="n">parsed_url</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;gs&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Image</span><span class="p">(</span><span class="n">gcs_uri</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>

        <span class="c1"># Load image from local path</span>
        <span class="n">image_bytes</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">()</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">image_bytes</span><span class="o">=</span><span class="n">image_bytes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">storage</span><span class="o">.</span><span class="n">Blob</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;_blob is only supported when gcs_uri is set.&quot;</span><span class="p">)</span>
        <span class="n">storage_client</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span>
            <span class="n">credentials</span><span class="o">=</span><span class="n">aiplatform_initializer</span><span class="o">.</span><span class="n">global_config</span><span class="o">.</span><span class="n">credentials</span>
        <span class="p">)</span>
        <span class="n">blob</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">Blob</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">storage_client</span><span class="p">)</span>
        <span class="c1"># Needed to populate `blob.content_type`</span>
        <span class="n">blob</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">blob</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_image_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_bytes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_blob</span><span class="o">.</span><span class="n">download_as_bytes</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_bytes</span>

    <span class="nd">@_image_bytes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">_image_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_bytes</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_pil_image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PIL_Image.Image&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">PIL_Image</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s2">&quot;The PIL module is not available. Please install the Pillow package.&quot;</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_image</span> <span class="o">=</span> <span class="n">PIL_Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_image_bytes</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_image</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pil_image</span><span class="o">.</span><span class="n">size</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_mime_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the MIME type of the image.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_blob</span><span class="o">.</span><span class="n">content_type</span>
        <span class="k">if</span> <span class="n">PIL_Image</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PIL_Image</span><span class="o">.</span><span class="n">MIME</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pil_image</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">)</span>
        <span class="c1"># Fall back to jpeg</span>
        <span class="k">return</span> <span class="s2">&quot;image/jpeg&quot;</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows the image.</span>

<span class="sd">        This method only works when in a notebook environment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">PIL_Image</span> <span class="ow">and</span> <span class="n">IPython_display</span><span class="p">:</span>
            <span class="n">IPython_display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pil_image</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves image to a file.</span>

<span class="sd">        Args:</span>
<span class="sd">            location: Local path where to save the image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_image_bytes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_as_base64_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Encodes image using the base64 encoding.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Base64 encoding of the image as a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># ! b64encode returns `bytes` object, not `str`.</span>
        <span class="c1"># We need to convert `bytes` to `str`, otherwise we get service error:</span>
        <span class="c1"># &quot;received initial metadata size exceeds limit&quot;</span>
        <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_image_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.Image.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
    <span class="nf">image_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>image_bytes</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Image file bytes. Image can be in PNG or JPEG format.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[bytes]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>gcs_uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Image URI in Google Cloud Storage.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates an `Image` object.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_bytes: Image file bytes. Image can be in PNG or JPEG format.</span>
<span class="sd">        gcs_uri: Image URI in Google Cloud Storage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">image_bytes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">(</span><span class="n">gcs_uri</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either image_bytes or gcs_uri must be provided.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_image_bytes</span> <span class="o">=</span> <span class="n">image_bytes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span> <span class="o">=</span> <span class="n">gcs_uri</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.Image.load_from_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_from_file</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Loads image from local file or Google Cloud Storage.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>location</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Local path or Google Cloud Storage uri from where to load
the image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Loaded image as an <code class="language-python highlight"><span class="n">Image</span></code> object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Image&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads image from local file or Google Cloud Storage.</span>

<span class="sd">    Args:</span>
<span class="sd">        location: Local path or Google Cloud Storage uri from where to load</span>
<span class="sd">            the image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Loaded image as an `Image` object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;https&quot;</span>
        <span class="ow">and</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">netloc</span> <span class="o">==</span> <span class="s2">&quot;storage.googleapis.com&quot;</span>
    <span class="p">):</span>
        <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span>
            <span class="n">scheme</span><span class="o">=</span><span class="s2">&quot;gs&quot;</span><span class="p">,</span> <span class="n">netloc</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">path</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">location</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlunparse</span><span class="p">(</span><span class="n">parsed_url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;gs&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Image</span><span class="p">(</span><span class="n">gcs_uri</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>

    <span class="c1"># Load image from local path</span>
    <span class="n">image_bytes</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">()</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">image_bytes</span><span class="o">=</span><span class="n">image_bytes</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">image</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.Image.save" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">save</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">save</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Saves image to a file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>location</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Local path where to save the image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Saves image to a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        location: Local path where to save the image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_image_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.Image.show" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">show</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">show</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Shows the image.</p>
<p>This method only works when in a notebook environment.</p>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shows the image.</span>

<span class="sd">    This method only works when in a notebook environment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">PIL_Image</span> <span class="ow">and</span> <span class="n">IPython_display</span><span class="p">:</span>
        <span class="n">IPython_display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pil_image</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.ImageCaptioningModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ImageCaptioningModel</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="vertexai._model_garden._model_garden_models._ModelGardenModel">_ModelGardenModel</span></code></p>


      <p>Generates captions from image.</p>
<p>Examples::</p>
<div class="language-text highlight"><pre><span></span><code>model = ImageCaptioningModel.from_pretrained(&quot;imagetext@001&quot;)
image = Image.load_from_file(&quot;image.png&quot;)
captions = model.get_captions(
    image=image,
    # Optional:
    number_of_results=1,
    language=&quot;en&quot;,
)
</code></pre></div>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ImageCaptioningModel</span><span class="p">(</span>
    <span class="n">_model_garden_models</span><span class="o">.</span><span class="n">_ModelGardenModel</span>  <span class="c1"># pylint: disable=protected-access</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates captions from image.</span>

<span class="sd">    Examples::</span>

<span class="sd">        model = ImageCaptioningModel.from_pretrained(&quot;imagetext@001&quot;)</span>
<span class="sd">        image = Image.load_from_file(&quot;image.png&quot;)</span>
<span class="sd">        captions = model.get_captions(</span>
<span class="sd">            image=image,</span>
<span class="sd">            # Optional:</span>
<span class="sd">            number_of_results=1,</span>
<span class="sd">            language=&quot;en&quot;,</span>
<span class="sd">        )</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="n">_INSTANCE_SCHEMA_URI</span> <span class="o">=</span> <span class="s2">&quot;gs://google-cloud-aiplatform/schema/predict/instance/vision_reasoning_model_1.0.0.yaml&quot;</span>

    <span class="k">def</span> <span class="nf">get_captions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">number_of_results</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
        <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates captions for a given image.</span>

<span class="sd">        Args:</span>
<span class="sd">            image: The image to get captions for. Size limit: 10 MB.</span>
<span class="sd">            number_of_results: Number of captions to produce. Range: 1-3.</span>
<span class="sd">            language: Language to use for captions.</span>
<span class="sd">                Supported languages: &quot;en&quot;, &quot;fr&quot;, &quot;de&quot;, &quot;it&quot;, &quot;es&quot;</span>
<span class="sd">            output_gcs_uri: Google Cloud Storage uri to store the captioned images.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of image caption strings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;sampleCount&quot;</span><span class="p">:</span> <span class="n">number_of_results</span><span class="p">,</span>
            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">output_gcs_uri</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;storageUri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_gcs_uri</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.ImageCaptioningModel.get_captions" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_captions</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">get_captions</span><span class="p">(</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">number_of_results</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
    <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Generates captions for a given image.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>image</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The image to get captions for. Size limit: 10 MB.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>number_of_results</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Number of captions to produce. Range: 1-3.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>1</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>language</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Language to use for captions.
Supported languages: "en", "fr", "de", "it", "es"</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;en&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>output_gcs_uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Google Cloud Storage uri to store the captioned images.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[str]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A list of image caption strings.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_captions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">number_of_results</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
    <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates captions for a given image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image: The image to get captions for. Size limit: 10 MB.</span>
<span class="sd">        number_of_results: Number of captions to produce. Range: 1-3.</span>
<span class="sd">        language: Language to use for captions.</span>
<span class="sd">            Supported languages: &quot;en&quot;, &quot;fr&quot;, &quot;de&quot;, &quot;it&quot;, &quot;es&quot;</span>
<span class="sd">        output_gcs_uri: Google Cloud Storage uri to store the captioned images.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of image caption strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="p">}</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;sampleCount&quot;</span><span class="p">:</span> <span class="n">number_of_results</span><span class="p">,</span>
        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">output_gcs_uri</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;storageUri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_gcs_uri</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
        <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.ImageGenerationModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ImageGenerationModel</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="vertexai._model_garden._model_garden_models._ModelGardenModel">_ModelGardenModel</span></code></p>


      <p>Generates images from text prompt.</p>
<p>Examples::</p>
<div class="language-text highlight"><pre><span></span><code>model = ImageGenerationModel.from_pretrained(&quot;imagegeneration@002&quot;)
response = model.generate_images(
    prompt=&quot;Astronaut riding a horse&quot;,
    # Optional:
    number_of_images=1,
    seed=0,
)
response[0].show()
response[0].save(&quot;image1.png&quot;)
</code></pre></div>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ImageGenerationModel</span><span class="p">(</span>
    <span class="n">_model_garden_models</span><span class="o">.</span><span class="n">_ModelGardenModel</span>  <span class="c1"># pylint: disable=protected-access</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates images from text prompt.</span>

<span class="sd">    Examples::</span>

<span class="sd">        model = ImageGenerationModel.from_pretrained(&quot;imagegeneration@002&quot;)</span>
<span class="sd">        response = model.generate_images(</span>
<span class="sd">            prompt=&quot;Astronaut riding a horse&quot;,</span>
<span class="sd">            # Optional:</span>
<span class="sd">            number_of_images=1,</span>
<span class="sd">            seed=0,</span>
<span class="sd">        )</span>
<span class="sd">        response[0].show()</span>
<span class="sd">        response[0].save(&quot;image1.png&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.preview.vision_models&quot;</span>

    <span class="n">_INSTANCE_SCHEMA_URI</span> <span class="o">=</span> <span class="s2">&quot;gs://google-cloud-aiplatform/schema/predict/instance/vision_generative_model_1.0.0.yaml&quot;</span>

    <span class="k">def</span> <span class="nf">_generate_images</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">negative_prompt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">number_of_images</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aspect_ratio</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;1:1&quot;</span><span class="p">,</span> <span class="s2">&quot;9:16&quot;</span><span class="p">,</span> <span class="s2">&quot;16:9&quot;</span><span class="p">,</span> <span class="s2">&quot;4:3&quot;</span><span class="p">,</span> <span class="s2">&quot;3:4&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">guidance_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">base_image</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">edit_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Literal</span><span class="p">[</span>
                <span class="s2">&quot;inpainting-insert&quot;</span><span class="p">,</span>
                <span class="s2">&quot;inpainting-remove&quot;</span><span class="p">,</span>
                <span class="s2">&quot;outpainting&quot;</span><span class="p">,</span>
                <span class="s2">&quot;product-image&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mask_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="s2">&quot;foreground&quot;</span><span class="p">,</span> <span class="s2">&quot;semantic&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">segmentation_classes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mask_dilation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">product_position</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;fixed&quot;</span><span class="p">,</span> <span class="s2">&quot;reposition&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_mime_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image/png&quot;</span><span class="p">,</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">compression_quality</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_watermark</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">safety_filter_level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;block_most&quot;</span><span class="p">,</span> <span class="s2">&quot;block_some&quot;</span><span class="p">,</span> <span class="s2">&quot;block_few&quot;</span><span class="p">,</span> <span class="s2">&quot;block_fewest&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">person_generation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;dont_allow&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_adult&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_all&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ImageGenerationResponse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates images from text prompt.</span>

<span class="sd">        Args:</span>
<span class="sd">            prompt: Text prompt for the image.</span>
<span class="sd">            negative_prompt: A description of what you want to omit in the generated</span>
<span class="sd">              images.</span>
<span class="sd">            number_of_images: Number of images to generate. Range: 1..8.</span>
<span class="sd">            width: Width of the image. One of the sizes must be 256 or 1024.</span>
<span class="sd">            height: Height of the image. One of the sizes must be 256 or 1024.</span>
<span class="sd">            aspect_ratio: Aspect ratio for the image. Supported values are:</span>
<span class="sd">                * 1:1 - Square image</span>
<span class="sd">                * 9:16 - Portait image</span>
<span class="sd">                * 16:9 - Landscape image</span>
<span class="sd">                * 4:3 - Landscape, desktop ratio.</span>
<span class="sd">                * 3:4 - Portrait, desktop ratio</span>
<span class="sd">            guidance_scale: Controls the strength of the prompt. Suggested values</span>
<span class="sd">              are - * 0-9 (low strength) * 10-20 (medium strength) * 21+ (high</span>
<span class="sd">              strength)</span>
<span class="sd">            seed: Image generation random seed.</span>
<span class="sd">            base_image: Base image to use for the image generation.</span>
<span class="sd">            mask: Mask for the base image.</span>
<span class="sd">            edit_mode: Describes the editing mode for the request. Supported values</span>
<span class="sd">              are - * inpainting-insert: fills the mask area based on the text</span>
<span class="sd">              prompt (requires mask and text) * inpainting-remove: removes the</span>
<span class="sd">              object(s) in the mask area. (requires mask)</span>
<span class="sd">                * outpainting: extend the image based on the mask area. (Requires</span>
<span class="sd">                  mask) * product-image: Changes the background for the predominant</span>
<span class="sd">                  product or subject in the image</span>
<span class="sd">            mask_mode: Solicits generation of the mask (v/s providing mask as an</span>
<span class="sd">              input). Supported values are:</span>
<span class="sd">                * background: Automatically generates a mask for all regions except</span>
<span class="sd">                  the primary subject(s) of the image</span>
<span class="sd">                * foreground: Automatically generates a mask for the primary</span>
<span class="sd">                  subjects(s) of the image.</span>
<span class="sd">                * semantic: Segment one or more of the segmentation classes using</span>
<span class="sd">                  class ID</span>
<span class="sd">            segmentation_classes: List of class IDs for segmentation. Max of 5 IDs</span>
<span class="sd">            mask_dilation: Defines the dilation percentage of the mask provided.</span>
<span class="sd">              Float between 0 and 1. Defaults to 0.03</span>
<span class="sd">            product_position: Defines whether the product should stay fixed or be</span>
<span class="sd">              repositioned. Supported Values:</span>
<span class="sd">                * fixed: Fixed position</span>
<span class="sd">                * reposition: Can be moved (default)</span>
<span class="sd">            output_mime_type: Which image format should the output be saved as.</span>
<span class="sd">              Supported values: * image/png: Save as a PNG image * image/jpeg: Save</span>
<span class="sd">              as a JPEG image</span>
<span class="sd">            compression_quality: Level of compression if the output mime type is</span>
<span class="sd">              selected to be image/jpeg. Float between 0 to 100</span>
<span class="sd">            language: Language of the text prompt for the image. Default: None.</span>
<span class="sd">              Supported values are `&quot;en&quot;` for English, `&quot;hi&quot;` for Hindi, `&quot;ja&quot;` for</span>
<span class="sd">              Japanese, `&quot;ko&quot;` for Korean, and `&quot;auto&quot;` for automatic language</span>
<span class="sd">              detection.</span>
<span class="sd">            output_gcs_uri: Google Cloud Storage uri to store the generated images.</span>
<span class="sd">            add_watermark: Add a watermark to the generated image</span>
<span class="sd">            safety_filter_level: Adds a filter level to Safety filtering. Supported</span>
<span class="sd">              values are: * &quot;block_most&quot; : Strongest filtering level, most strict</span>
<span class="sd">              blocking * &quot;block_some&quot; : Block some problematic prompts and responses</span>
<span class="sd">              * &quot;block_few&quot; : Block fewer problematic prompts and responses *</span>
<span class="sd">              &quot;block_fewest&quot; : Block very few problematic prompts and responses</span>
<span class="sd">            person_generation: Allow generation of people by the model Supported</span>
<span class="sd">              values are: * &quot;dont_allow&quot; : Block generation of people *</span>
<span class="sd">              &quot;allow_adult&quot; : Generate adults, but not children * &quot;allow_all&quot; :</span>
<span class="sd">              Generate adults and children</span>

<span class="sd">        Returns:</span>
<span class="sd">            An `ImageGenerationResponse` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Note: Only a single prompt is supported by the service.</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">}</span>
        <span class="n">shared_generation_parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>
            <span class="c1"># b/295946075 The service stopped supporting image sizes.</span>
            <span class="c1"># &quot;width&quot;: width,</span>
            <span class="c1"># &quot;height&quot;: height,</span>
            <span class="s2">&quot;number_of_images_in_batch&quot;</span><span class="p">:</span> <span class="n">number_of_images</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">base_image</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">base_image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">base_image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="p">}</span>
                <span class="n">shared_generation_parameters</span><span class="p">[</span>
                    <span class="s2">&quot;base_image_uri&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">base_image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">base_image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="p">}</span>
                <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;base_image_hash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span>
                    <span class="n">base_image</span><span class="o">.</span><span class="n">_image_bytes</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">mask</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;mask&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">mask</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
                    <span class="p">},</span>
                <span class="p">}</span>
                <span class="n">shared_generation_parameters</span><span class="p">[</span>
                    <span class="s2">&quot;mask_uri&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;mask&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">mask</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
                    <span class="p">},</span>
                <span class="p">}</span>
                <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;mask_hash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span>
                    <span class="n">mask</span><span class="o">.</span><span class="n">_image_bytes</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">max_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">width</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">aspect_ratio</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;aspectRatio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect_ratio</span>
        <span class="k">elif</span> <span class="n">max_size</span><span class="p">:</span>
            <span class="c1"># Note: The size needs to be a string</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;sampleImageSize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_size</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">height</span> <span class="o">!=</span> <span class="n">width</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;aspectRatio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;sampleCount&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">number_of_images</span>
        <span class="k">if</span> <span class="n">negative_prompt</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;negativePrompt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">negative_prompt</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;negative_prompt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">negative_prompt</span>

        <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Note: String seed and numerical seed give different results</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;seed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seed</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;seed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seed</span>

        <span class="k">if</span> <span class="n">guidance_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;guidanceScale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">guidance_scale</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;guidance_scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">guidance_scale</span>

        <span class="k">if</span> <span class="n">language</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">language</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">language</span>

        <span class="k">if</span> <span class="n">output_gcs_uri</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;storageUri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_gcs_uri</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;storage_uri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_gcs_uri</span>

        <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;editConfig&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">edit_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;editConfig&quot;</span><span class="p">][</span><span class="s2">&quot;editMode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">edit_mode</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;edit_mode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">edit_mode</span>

        <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">edit_mode</span> <span class="o">!=</span> <span class="s2">&quot;product-image&quot;</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;editConfig&quot;</span><span class="p">][</span><span class="s2">&quot;maskMode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">mask_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;editConfig&quot;</span><span class="p">][</span><span class="s2">&quot;maskMode&quot;</span><span class="p">][</span><span class="s2">&quot;maskType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask_mode</span>
                <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;mask_mode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask_mode</span>

            <span class="k">if</span> <span class="n">segmentation_classes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;editConfig&quot;</span><span class="p">][</span><span class="s2">&quot;maskMode&quot;</span><span class="p">][</span><span class="s2">&quot;classes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">segmentation_classes</span>
                <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;classes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">segmentation_classes</span>

        <span class="k">if</span> <span class="n">mask_dilation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;editConfig&quot;</span><span class="p">][</span><span class="s2">&quot;maskDilation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask_dilation</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;mask_dilation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask_dilation</span>

        <span class="k">if</span> <span class="n">product_position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;editConfig&quot;</span><span class="p">][</span><span class="s2">&quot;productPosition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_position</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;product_position&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_position</span>

        <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;outputOptions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">output_mime_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;outputOptions&quot;</span><span class="p">][</span><span class="s2">&quot;mimeType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_mime_type</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;mime_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_mime_type</span>

        <span class="k">if</span> <span class="n">compression_quality</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;outputOptions&quot;</span><span class="p">][</span><span class="s2">&quot;compressionQuality&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">compression_quality</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;compression_quality&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">compression_quality</span>

        <span class="k">if</span> <span class="n">add_watermark</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;addWatermark&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_watermark</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;add_watermark&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_watermark</span>

        <span class="k">if</span> <span class="n">safety_filter_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;safetySetting&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">safety_filter_level</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;safety_filter_level&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">safety_filter_level</span>

        <span class="k">if</span> <span class="n">person_generation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;personGeneration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">person_generation</span>
            <span class="n">shared_generation_parameters</span><span class="p">[</span><span class="s2">&quot;person_generation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">person_generation</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">generated_images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;GeneratedImage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">prediction</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">):</span>
            <span class="n">generation_parameters</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">shared_generation_parameters</span><span class="p">)</span>
            <span class="n">generation_parameters</span><span class="p">[</span><span class="s2">&quot;index_of_image_in_batch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span>
            <span class="n">encoded_bytes</span> <span class="o">=</span> <span class="n">prediction</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">)</span>
            <span class="n">generated_image</span> <span class="o">=</span> <span class="n">GeneratedImage</span><span class="p">(</span>
                <span class="n">image_bytes</span><span class="o">=</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">encoded_bytes</span><span class="p">)</span> <span class="k">if</span> <span class="n">encoded_bytes</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">generation_parameters</span><span class="o">=</span><span class="n">generation_parameters</span><span class="p">,</span>
                <span class="n">gcs_uri</span><span class="o">=</span><span class="n">prediction</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gcsUri&quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">generated_images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generated_image</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ImageGenerationResponse</span><span class="p">(</span><span class="n">images</span><span class="o">=</span><span class="n">generated_images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_images</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">negative_prompt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">number_of_images</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">aspect_ratio</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;1:1&quot;</span><span class="p">,</span> <span class="s2">&quot;9:16&quot;</span><span class="p">,</span> <span class="s2">&quot;16:9&quot;</span><span class="p">,</span> <span class="s2">&quot;4:3&quot;</span><span class="p">,</span> <span class="s2">&quot;3:4&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">guidance_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_watermark</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">safety_filter_level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;block_most&quot;</span><span class="p">,</span> <span class="s2">&quot;block_some&quot;</span><span class="p">,</span> <span class="s2">&quot;block_few&quot;</span><span class="p">,</span> <span class="s2">&quot;block_fewest&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">person_generation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;dont_allow&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_adult&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_all&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ImageGenerationResponse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates images from text prompt.</span>

<span class="sd">        Args:</span>
<span class="sd">            prompt: Text prompt for the image.</span>
<span class="sd">            negative_prompt: A description of what you want to omit in the generated</span>
<span class="sd">                images.</span>
<span class="sd">            number_of_images: Number of images to generate. Range: 1..8.</span>
<span class="sd">            aspect_ratio: Changes the aspect ratio of the generated image Supported</span>
<span class="sd">                values are:</span>
<span class="sd">                * &quot;1:1&quot; : 1:1 aspect ratio</span>
<span class="sd">                * &quot;9:16&quot; : 9:16 aspect ratio</span>
<span class="sd">                * &quot;16:9&quot; : 16:9 aspect ratio</span>
<span class="sd">                * &quot;4:3&quot; : 4:3 aspect ratio</span>
<span class="sd">                * &quot;3:4&quot; : 3:4 aspect_ratio</span>
<span class="sd">            guidance_scale: Controls the strength of the prompt. Suggested values are:</span>
<span class="sd">                * 0-9 (low strength)</span>
<span class="sd">                * 10-20 (medium strength)</span>
<span class="sd">                * 21+ (high strength)</span>
<span class="sd">            language: Language of the text prompt for the image. Default: None.</span>
<span class="sd">                Supported values are `&quot;en&quot;` for English, `&quot;hi&quot;` for Hindi, `&quot;ja&quot;`</span>
<span class="sd">                for Japanese, `&quot;ko&quot;` for Korean, and `&quot;auto&quot;` for automatic language</span>
<span class="sd">                detection.</span>
<span class="sd">            seed: Image generation random seed.</span>
<span class="sd">            output_gcs_uri: Google Cloud Storage uri to store the generated images.</span>
<span class="sd">            add_watermark: Add a watermark to the generated image</span>
<span class="sd">            safety_filter_level: Adds a filter level to Safety filtering. Supported</span>
<span class="sd">                values are:</span>
<span class="sd">                * &quot;block_most&quot; : Strongest filtering level, most strict</span>
<span class="sd">                blocking</span>
<span class="sd">                * &quot;block_some&quot; : Block some problematic prompts and responses</span>
<span class="sd">                * &quot;block_few&quot; : Block fewer problematic prompts and responses</span>
<span class="sd">                * &quot;block_fewest&quot; : Block very few problematic prompts and responses</span>
<span class="sd">            person_generation: Allow generation of people by the model Supported</span>
<span class="sd">                values are:</span>
<span class="sd">                * &quot;dont_allow&quot; : Block generation of people</span>
<span class="sd">                * &quot;allow_adult&quot; : Generate adults, but not children</span>
<span class="sd">                * &quot;allow_all&quot; : Generate adults and children</span>
<span class="sd">        Returns:</span>
<span class="sd">            An `ImageGenerationResponse` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_images</span><span class="p">(</span>
            <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
            <span class="n">negative_prompt</span><span class="o">=</span><span class="n">negative_prompt</span><span class="p">,</span>
            <span class="n">number_of_images</span><span class="o">=</span><span class="n">number_of_images</span><span class="p">,</span>
            <span class="n">aspect_ratio</span><span class="o">=</span><span class="n">aspect_ratio</span><span class="p">,</span>
            <span class="n">guidance_scale</span><span class="o">=</span><span class="n">guidance_scale</span><span class="p">,</span>
            <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
            <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
            <span class="n">output_gcs_uri</span><span class="o">=</span><span class="n">output_gcs_uri</span><span class="p">,</span>
            <span class="n">add_watermark</span><span class="o">=</span><span class="n">add_watermark</span><span class="p">,</span>
            <span class="n">safety_filter_level</span><span class="o">=</span><span class="n">safety_filter_level</span><span class="p">,</span>
            <span class="n">person_generation</span><span class="o">=</span><span class="n">person_generation</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">edit_image</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">base_image</span><span class="p">:</span> <span class="s2">&quot;Image&quot;</span><span class="p">,</span>
        <span class="n">mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">negative_prompt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">number_of_images</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">guidance_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">edit_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Literal</span><span class="p">[</span>
                <span class="s2">&quot;inpainting-insert&quot;</span><span class="p">,</span> <span class="s2">&quot;inpainting-remove&quot;</span><span class="p">,</span> <span class="s2">&quot;outpainting&quot;</span><span class="p">,</span> <span class="s2">&quot;product-image&quot;</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mask_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="s2">&quot;foreground&quot;</span><span class="p">,</span> <span class="s2">&quot;semantic&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">segmentation_classes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mask_dilation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">product_position</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;fixed&quot;</span><span class="p">,</span> <span class="s2">&quot;reposition&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_mime_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image/png&quot;</span><span class="p">,</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">compression_quality</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">safety_filter_level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;block_most&quot;</span><span class="p">,</span> <span class="s2">&quot;block_some&quot;</span><span class="p">,</span> <span class="s2">&quot;block_few&quot;</span><span class="p">,</span> <span class="s2">&quot;block_fewest&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">person_generation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;dont_allow&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_adult&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_all&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ImageGenerationResponse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Edits an existing image based on text prompt.</span>

<span class="sd">        Args:</span>
<span class="sd">            prompt: Text prompt for the image.</span>
<span class="sd">            base_image: Base image from which to generate the new image.</span>
<span class="sd">            mask: Mask for the base image.</span>
<span class="sd">            negative_prompt: A description of what you want to omit in</span>
<span class="sd">                the generated images.</span>
<span class="sd">            number_of_images: Number of images to generate. Range: 1..8.</span>
<span class="sd">            guidance_scale: Controls the strength of the prompt.</span>
<span class="sd">                Suggested values are:</span>
<span class="sd">                * 0-9 (low strength)</span>
<span class="sd">                * 10-20 (medium strength)</span>
<span class="sd">                * 21+ (high strength)</span>
<span class="sd">            edit_mode: Describes the editing mode for the request. Supported values are:</span>
<span class="sd">                * inpainting-insert: fills the mask area based on the text prompt</span>
<span class="sd">                (requires mask and text)</span>
<span class="sd">                * inpainting-remove: removes the object(s) in the mask area.</span>
<span class="sd">                (requires mask)</span>
<span class="sd">                * outpainting: extend the image based on the mask area.</span>
<span class="sd">                (Requires mask)</span>
<span class="sd">                * product-image: Changes the background for the predominant product</span>
<span class="sd">                or subject in the image</span>
<span class="sd">            mask_mode: Solicits generation of the mask (v/s providing mask as an</span>
<span class="sd">                input). Supported values are:</span>
<span class="sd">                * background: Automatically generates a mask for all regions except</span>
<span class="sd">                the primary subject(s) of the image</span>
<span class="sd">                * foreground: Automatically generates a mask for the primary</span>
<span class="sd">                subjects(s) of the image.</span>
<span class="sd">                * semantic: Segment one or more of the segmentation classes using</span>
<span class="sd">                class ID</span>
<span class="sd">            segmentation_classes: List of class IDs for segmentation. Max of 5 IDs</span>
<span class="sd">            mask_dilation: Defines the dilation percentage of the mask provided.</span>
<span class="sd">                Float between 0 and 1. Defaults to 0.03</span>
<span class="sd">            product_position: Defines whether the product should stay fixed or be</span>
<span class="sd">                repositioned. Supported Values:</span>
<span class="sd">                * fixed: Fixed position</span>
<span class="sd">                * reposition: Can be moved (default)</span>
<span class="sd">            output_mime_type: Which image format should the output be saved as.</span>
<span class="sd">                Supported values:</span>
<span class="sd">                * image/png: Save as a PNG image</span>
<span class="sd">                * image/jpeg: Save as a JPEG image</span>
<span class="sd">            compression_quality: Level of compression if the output mime type is</span>
<span class="sd">              selected to be image/jpeg. Float between 0 to 100</span>
<span class="sd">            language: Language of the text prompt for the image. Default: None.</span>
<span class="sd">                Supported values are `&quot;en&quot;` for English, `&quot;hi&quot;` for Hindi,</span>
<span class="sd">                `&quot;ja&quot;` for Japanese, `&quot;ko&quot;` for Korean, and `&quot;auto&quot;` for</span>
<span class="sd">                automatic language detection.</span>
<span class="sd">            seed: Image generation random seed.</span>
<span class="sd">            output_gcs_uri: Google Cloud Storage uri to store the edited images.</span>
<span class="sd">            safety_filter_level: Adds a filter level to Safety filtering. Supported</span>
<span class="sd">                values are:</span>
<span class="sd">                * &quot;block_most&quot; : Strongest filtering level, most strict</span>
<span class="sd">                blocking</span>
<span class="sd">                * &quot;block_some&quot; : Block some problematic prompts and responses</span>
<span class="sd">                * &quot;block_few&quot; : Block fewer problematic prompts and responses</span>
<span class="sd">                * &quot;block_fewest&quot; : Block very few problematic prompts and responses</span>
<span class="sd">            person_generation: Allow generation of people by the model Supported</span>
<span class="sd">                values are:</span>
<span class="sd">                * &quot;dont_allow&quot; : Block generation of people</span>
<span class="sd">                * &quot;allow_adult&quot; : Generate adults, but not children</span>
<span class="sd">                * &quot;allow_all&quot; : Generate adults and children</span>

<span class="sd">        Returns:</span>
<span class="sd">            An `ImageGenerationResponse` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_images</span><span class="p">(</span>
            <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
            <span class="n">negative_prompt</span><span class="o">=</span><span class="n">negative_prompt</span><span class="p">,</span>
            <span class="n">number_of_images</span><span class="o">=</span><span class="n">number_of_images</span><span class="p">,</span>
            <span class="n">guidance_scale</span><span class="o">=</span><span class="n">guidance_scale</span><span class="p">,</span>
            <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
            <span class="n">base_image</span><span class="o">=</span><span class="n">base_image</span><span class="p">,</span>
            <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span>
            <span class="n">edit_mode</span><span class="o">=</span><span class="n">edit_mode</span><span class="p">,</span>
            <span class="n">mask_mode</span><span class="o">=</span><span class="n">mask_mode</span><span class="p">,</span>
            <span class="n">segmentation_classes</span><span class="o">=</span><span class="n">segmentation_classes</span><span class="p">,</span>
            <span class="n">mask_dilation</span><span class="o">=</span><span class="n">mask_dilation</span><span class="p">,</span>
            <span class="n">product_position</span><span class="o">=</span><span class="n">product_position</span><span class="p">,</span>
            <span class="n">output_mime_type</span><span class="o">=</span><span class="n">output_mime_type</span><span class="p">,</span>
            <span class="n">compression_quality</span><span class="o">=</span><span class="n">compression_quality</span><span class="p">,</span>
            <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
            <span class="n">output_gcs_uri</span><span class="o">=</span><span class="n">output_gcs_uri</span><span class="p">,</span>
            <span class="n">add_watermark</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Not supported for editing yet</span>
            <span class="n">safety_filter_level</span><span class="o">=</span><span class="n">safety_filter_level</span><span class="p">,</span>
            <span class="n">person_generation</span><span class="o">=</span><span class="n">person_generation</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">upscale_image</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">,</span> <span class="s2">&quot;GeneratedImage&quot;</span><span class="p">],</span>
        <span class="n">new_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">,</span>
        <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Image&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Upscales an image.</span>

<span class="sd">        This supports upscaling images generated through the `generate_images()` method,</span>
<span class="sd">        or upscaling a new image that is 1024x1024.</span>

<span class="sd">        Examples::</span>

<span class="sd">            # Upscale a generated image</span>
<span class="sd">            model = ImageGenerationModel.from_pretrained(&quot;imagegeneration@002&quot;)</span>
<span class="sd">            response = model.generate_images(</span>
<span class="sd">                prompt=&quot;Astronaut riding a horse&quot;,</span>
<span class="sd">            )</span>
<span class="sd">            model.upscale_image(image=response[0])</span>

<span class="sd">            # Upscale a new 1024x1024 image</span>
<span class="sd">            my_image = Image.load_from_file(&quot;my-image.png&quot;)</span>
<span class="sd">            model.upscale_image(image=my_image)</span>

<span class="sd">        Args:</span>
<span class="sd">            image (Union[GeneratedImage, Image]):</span>
<span class="sd">                Required. The generated image to upscale.</span>
<span class="sd">            new_size (int):</span>
<span class="sd">                The size of the biggest dimension of the upscaled image. Only 2048 and 4096 are currently</span>
<span class="sd">                supported. Results in a 2048x2048 or 4096x4096 image. Defaults to 2048 if not provided.</span>
<span class="sd">            output_gcs_uri: Google Cloud Storage uri to store the upscaled images.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An `Image` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Currently this method only supports 1024x1024 images</span>
        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1024</span> <span class="ow">and</span> <span class="n">image</span><span class="o">.</span><span class="n">_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1024</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Upscaling is currently only supported on images that are 1024x1024.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">new_size</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_SUPPORTED_UPSCALING_SIZES</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Only the folowing square upscaling sizes are currently supported: </span><span class="si">{</span><span class="n">_SUPPORTED_UPSCALING_SIZES</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="n">instance</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;sampleImageSize&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">new_size</span><span class="p">),</span>
            <span class="s2">&quot;sampleCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;upscale&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">output_gcs_uri</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;storageUri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_gcs_uri</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">upscaled_image</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">GeneratedImage</span><span class="p">):</span>
            <span class="n">generation_parameters</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">generation_parameters</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">generation_parameters</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">generation_parameters</span><span class="p">[</span><span class="s2">&quot;upscaled_image_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_size</span>

        <span class="n">encoded_bytes</span> <span class="o">=</span> <span class="n">upscaled_image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">GeneratedImage</span><span class="p">(</span>
            <span class="n">image_bytes</span><span class="o">=</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">encoded_bytes</span><span class="p">)</span> <span class="k">if</span> <span class="n">encoded_bytes</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">generation_parameters</span><span class="o">=</span><span class="n">generation_parameters</span><span class="p">,</span>
            <span class="n">gcs_uri</span><span class="o">=</span><span class="n">upscaled_image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gcsUri&quot;</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.ImageGenerationModel.edit_image" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">edit_image</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">edit_image</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_image</span><span class="p">:</span> <span class="n">Image</span><span class="p">,</span>
    <span class="n">mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Image</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">negative_prompt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">number_of_images</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">guidance_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">edit_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span>
            <span class="s2">&quot;inpainting-insert&quot;</span><span class="p">,</span>
            <span class="s2">&quot;inpainting-remove&quot;</span><span class="p">,</span>
            <span class="s2">&quot;outpainting&quot;</span><span class="p">,</span>
            <span class="s2">&quot;product-image&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mask_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="s2">&quot;foreground&quot;</span><span class="p">,</span> <span class="s2">&quot;semantic&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">segmentation_classes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mask_dilation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">product_position</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;fixed&quot;</span><span class="p">,</span> <span class="s2">&quot;reposition&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_mime_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image/png&quot;</span><span class="p">,</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">compression_quality</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">safety_filter_level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span>
            <span class="s2">&quot;block_most&quot;</span><span class="p">,</span>
            <span class="s2">&quot;block_some&quot;</span><span class="p">,</span>
            <span class="s2">&quot;block_few&quot;</span><span class="p">,</span>
            <span class="s2">&quot;block_fewest&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">person_generation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;dont_allow&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_adult&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_all&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImageGenerationResponse</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Edits an existing image based on text prompt.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>prompt</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Text prompt for the image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>base_image</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Base image from which to generate the new image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>mask</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Mask for the base image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>negative_prompt</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A description of what you want to omit in
the generated images.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>number_of_images</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Number of images to generate. Range: 1..8.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>1</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>guidance_scale</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Controls the strength of the prompt.
Suggested values are:
* 0-9 (low strength)
* 10-20 (medium strength)
* 21+ (high strength)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[float]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>edit_mode</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Describes the editing mode for the request. Supported values are:
* inpainting-insert: fills the mask area based on the text prompt
(requires mask and text)
* inpainting-remove: removes the object(s) in the mask area.
(requires mask)
* outpainting: extend the image based on the mask area.
(Requires mask)
* product-image: Changes the background for the predominant product
or subject in the image</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;inpainting-insert&#39;, &#39;inpainting-remove&#39;, &#39;outpainting&#39;, &#39;product-image&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>mask_mode</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Solicits generation of the mask (v/s providing mask as an
input). Supported values are:
* background: Automatically generates a mask for all regions except
the primary subject(s) of the image
* foreground: Automatically generates a mask for the primary
subjects(s) of the image.
* semantic: Segment one or more of the segmentation classes using
class ID</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;background&#39;, &#39;foreground&#39;, &#39;semantic&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>segmentation_classes</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>List of class IDs for segmentation. Max of 5 IDs</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>mask_dilation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Defines the dilation percentage of the mask provided.
Float between 0 and 1. Defaults to 0.03</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[float]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>product_position</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Defines whether the product should stay fixed or be
repositioned. Supported Values:
* fixed: Fixed position
* reposition: Can be moved (default)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;fixed&#39;, &#39;reposition&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>output_mime_type</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Which image format should the output be saved as.
Supported values:
* image/png: Save as a PNG image
* image/jpeg: Save as a JPEG image</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;image/png&#39;, &#39;image/jpeg&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>compression_quality</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Level of compression if the output mime type is
selected to be image/jpeg. Float between 0 to 100</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[float]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>language</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Language of the text prompt for the image. Default: None.
Supported values are <code class="language-python highlight"><span class="s2">&quot;en&quot;</span></code> for English, <code class="language-python highlight"><span class="s2">&quot;hi&quot;</span></code> for Hindi,
<code class="language-python highlight"><span class="s2">&quot;ja&quot;</span></code> for Japanese, <code class="language-python highlight"><span class="s2">&quot;ko&quot;</span></code> for Korean, and <code class="language-python highlight"><span class="s2">&quot;auto&quot;</span></code> for
automatic language detection.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>seed</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Image generation random seed.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[int]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>output_gcs_uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Google Cloud Storage uri to store the edited images.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>safety_filter_level</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Adds a filter level to Safety filtering. Supported
values are:
* "block_most" : Strongest filtering level, most strict
blocking
* "block_some" : Block some problematic prompts and responses
* "block_few" : Block fewer problematic prompts and responses
* "block_fewest" : Block very few problematic prompts and responses</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;block_most&#39;, &#39;block_some&#39;, &#39;block_few&#39;, &#39;block_fewest&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>person_generation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Allow generation of people by the model Supported
values are:
* "dont_allow" : Block generation of people
* "allow_adult" : Generate adults, but not children
* "allow_all" : Generate adults and children</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;dont_allow&#39;, &#39;allow_adult&#39;, &#39;allow_all&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.ImageGenerationResponse" href="#vertexai.preview.vision_models.ImageGenerationResponse">ImageGenerationResponse</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An <code class="language-python highlight"><span class="n">ImageGenerationResponse</span></code> object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">edit_image</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_image</span><span class="p">:</span> <span class="s2">&quot;Image&quot;</span><span class="p">,</span>
    <span class="n">mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">negative_prompt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">number_of_images</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">guidance_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">edit_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span>
            <span class="s2">&quot;inpainting-insert&quot;</span><span class="p">,</span> <span class="s2">&quot;inpainting-remove&quot;</span><span class="p">,</span> <span class="s2">&quot;outpainting&quot;</span><span class="p">,</span> <span class="s2">&quot;product-image&quot;</span>
        <span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mask_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="s2">&quot;foreground&quot;</span><span class="p">,</span> <span class="s2">&quot;semantic&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">segmentation_classes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mask_dilation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">product_position</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;fixed&quot;</span><span class="p">,</span> <span class="s2">&quot;reposition&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_mime_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image/png&quot;</span><span class="p">,</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">compression_quality</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">safety_filter_level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;block_most&quot;</span><span class="p">,</span> <span class="s2">&quot;block_some&quot;</span><span class="p">,</span> <span class="s2">&quot;block_few&quot;</span><span class="p">,</span> <span class="s2">&quot;block_fewest&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">person_generation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;dont_allow&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_adult&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_all&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ImageGenerationResponse&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Edits an existing image based on text prompt.</span>

<span class="sd">    Args:</span>
<span class="sd">        prompt: Text prompt for the image.</span>
<span class="sd">        base_image: Base image from which to generate the new image.</span>
<span class="sd">        mask: Mask for the base image.</span>
<span class="sd">        negative_prompt: A description of what you want to omit in</span>
<span class="sd">            the generated images.</span>
<span class="sd">        number_of_images: Number of images to generate. Range: 1..8.</span>
<span class="sd">        guidance_scale: Controls the strength of the prompt.</span>
<span class="sd">            Suggested values are:</span>
<span class="sd">            * 0-9 (low strength)</span>
<span class="sd">            * 10-20 (medium strength)</span>
<span class="sd">            * 21+ (high strength)</span>
<span class="sd">        edit_mode: Describes the editing mode for the request. Supported values are:</span>
<span class="sd">            * inpainting-insert: fills the mask area based on the text prompt</span>
<span class="sd">            (requires mask and text)</span>
<span class="sd">            * inpainting-remove: removes the object(s) in the mask area.</span>
<span class="sd">            (requires mask)</span>
<span class="sd">            * outpainting: extend the image based on the mask area.</span>
<span class="sd">            (Requires mask)</span>
<span class="sd">            * product-image: Changes the background for the predominant product</span>
<span class="sd">            or subject in the image</span>
<span class="sd">        mask_mode: Solicits generation of the mask (v/s providing mask as an</span>
<span class="sd">            input). Supported values are:</span>
<span class="sd">            * background: Automatically generates a mask for all regions except</span>
<span class="sd">            the primary subject(s) of the image</span>
<span class="sd">            * foreground: Automatically generates a mask for the primary</span>
<span class="sd">            subjects(s) of the image.</span>
<span class="sd">            * semantic: Segment one or more of the segmentation classes using</span>
<span class="sd">            class ID</span>
<span class="sd">        segmentation_classes: List of class IDs for segmentation. Max of 5 IDs</span>
<span class="sd">        mask_dilation: Defines the dilation percentage of the mask provided.</span>
<span class="sd">            Float between 0 and 1. Defaults to 0.03</span>
<span class="sd">        product_position: Defines whether the product should stay fixed or be</span>
<span class="sd">            repositioned. Supported Values:</span>
<span class="sd">            * fixed: Fixed position</span>
<span class="sd">            * reposition: Can be moved (default)</span>
<span class="sd">        output_mime_type: Which image format should the output be saved as.</span>
<span class="sd">            Supported values:</span>
<span class="sd">            * image/png: Save as a PNG image</span>
<span class="sd">            * image/jpeg: Save as a JPEG image</span>
<span class="sd">        compression_quality: Level of compression if the output mime type is</span>
<span class="sd">          selected to be image/jpeg. Float between 0 to 100</span>
<span class="sd">        language: Language of the text prompt for the image. Default: None.</span>
<span class="sd">            Supported values are `&quot;en&quot;` for English, `&quot;hi&quot;` for Hindi,</span>
<span class="sd">            `&quot;ja&quot;` for Japanese, `&quot;ko&quot;` for Korean, and `&quot;auto&quot;` for</span>
<span class="sd">            automatic language detection.</span>
<span class="sd">        seed: Image generation random seed.</span>
<span class="sd">        output_gcs_uri: Google Cloud Storage uri to store the edited images.</span>
<span class="sd">        safety_filter_level: Adds a filter level to Safety filtering. Supported</span>
<span class="sd">            values are:</span>
<span class="sd">            * &quot;block_most&quot; : Strongest filtering level, most strict</span>
<span class="sd">            blocking</span>
<span class="sd">            * &quot;block_some&quot; : Block some problematic prompts and responses</span>
<span class="sd">            * &quot;block_few&quot; : Block fewer problematic prompts and responses</span>
<span class="sd">            * &quot;block_fewest&quot; : Block very few problematic prompts and responses</span>
<span class="sd">        person_generation: Allow generation of people by the model Supported</span>
<span class="sd">            values are:</span>
<span class="sd">            * &quot;dont_allow&quot; : Block generation of people</span>
<span class="sd">            * &quot;allow_adult&quot; : Generate adults, but not children</span>
<span class="sd">            * &quot;allow_all&quot; : Generate adults and children</span>

<span class="sd">    Returns:</span>
<span class="sd">        An `ImageGenerationResponse` object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_images</span><span class="p">(</span>
        <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
        <span class="n">negative_prompt</span><span class="o">=</span><span class="n">negative_prompt</span><span class="p">,</span>
        <span class="n">number_of_images</span><span class="o">=</span><span class="n">number_of_images</span><span class="p">,</span>
        <span class="n">guidance_scale</span><span class="o">=</span><span class="n">guidance_scale</span><span class="p">,</span>
        <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
        <span class="n">base_image</span><span class="o">=</span><span class="n">base_image</span><span class="p">,</span>
        <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span>
        <span class="n">edit_mode</span><span class="o">=</span><span class="n">edit_mode</span><span class="p">,</span>
        <span class="n">mask_mode</span><span class="o">=</span><span class="n">mask_mode</span><span class="p">,</span>
        <span class="n">segmentation_classes</span><span class="o">=</span><span class="n">segmentation_classes</span><span class="p">,</span>
        <span class="n">mask_dilation</span><span class="o">=</span><span class="n">mask_dilation</span><span class="p">,</span>
        <span class="n">product_position</span><span class="o">=</span><span class="n">product_position</span><span class="p">,</span>
        <span class="n">output_mime_type</span><span class="o">=</span><span class="n">output_mime_type</span><span class="p">,</span>
        <span class="n">compression_quality</span><span class="o">=</span><span class="n">compression_quality</span><span class="p">,</span>
        <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
        <span class="n">output_gcs_uri</span><span class="o">=</span><span class="n">output_gcs_uri</span><span class="p">,</span>
        <span class="n">add_watermark</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Not supported for editing yet</span>
        <span class="n">safety_filter_level</span><span class="o">=</span><span class="n">safety_filter_level</span><span class="p">,</span>
        <span class="n">person_generation</span><span class="o">=</span><span class="n">person_generation</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.ImageGenerationModel.generate_images" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">generate_images</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">generate_images</span><span class="p">(</span>
    <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">negative_prompt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">number_of_images</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">aspect_ratio</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;1:1&quot;</span><span class="p">,</span> <span class="s2">&quot;9:16&quot;</span><span class="p">,</span> <span class="s2">&quot;16:9&quot;</span><span class="p">,</span> <span class="s2">&quot;4:3&quot;</span><span class="p">,</span> <span class="s2">&quot;3:4&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">guidance_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_watermark</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">safety_filter_level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span>
            <span class="s2">&quot;block_most&quot;</span><span class="p">,</span>
            <span class="s2">&quot;block_some&quot;</span><span class="p">,</span>
            <span class="s2">&quot;block_few&quot;</span><span class="p">,</span>
            <span class="s2">&quot;block_fewest&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">person_generation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;dont_allow&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_adult&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_all&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImageGenerationResponse</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Generates images from text prompt.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>prompt</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Text prompt for the image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>negative_prompt</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A description of what you want to omit in the generated
images.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>number_of_images</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Number of images to generate. Range: 1..8.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>1</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>aspect_ratio</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Changes the aspect ratio of the generated image Supported
values are:
* "1:1" : 1:1 aspect ratio
* "9:16" : 9:16 aspect ratio
* "16:9" : 16:9 aspect ratio
* "4:3" : 4:3 aspect ratio
* "3:4" : 3:4 aspect_ratio</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;1:1&#39;, &#39;9:16&#39;, &#39;16:9&#39;, &#39;4:3&#39;, &#39;3:4&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>guidance_scale</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Controls the strength of the prompt. Suggested values are:
* 0-9 (low strength)
* 10-20 (medium strength)
* 21+ (high strength)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[float]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>language</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Language of the text prompt for the image. Default: None.
Supported values are <code class="language-python highlight"><span class="s2">&quot;en&quot;</span></code> for English, <code class="language-python highlight"><span class="s2">&quot;hi&quot;</span></code> for Hindi, <code class="language-python highlight"><span class="s2">&quot;ja&quot;</span></code>
for Japanese, <code class="language-python highlight"><span class="s2">&quot;ko&quot;</span></code> for Korean, and <code class="language-python highlight"><span class="s2">&quot;auto&quot;</span></code> for automatic language
detection.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>seed</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Image generation random seed.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[int]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>output_gcs_uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Google Cloud Storage uri to store the generated images.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>add_watermark</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Add a watermark to the generated image</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[bool]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>safety_filter_level</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Adds a filter level to Safety filtering. Supported
values are:
* "block_most" : Strongest filtering level, most strict
blocking
* "block_some" : Block some problematic prompts and responses
* "block_few" : Block fewer problematic prompts and responses
* "block_fewest" : Block very few problematic prompts and responses</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;block_most&#39;, &#39;block_some&#39;, &#39;block_few&#39;, &#39;block_fewest&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>person_generation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Allow generation of people by the model Supported
values are:
* "dont_allow" : Block generation of people
* "allow_adult" : Generate adults, but not children
* "allow_all" : Generate adults and children</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;dont_allow&#39;, &#39;allow_adult&#39;, &#39;allow_all&#39;]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    An <code class="language-python highlight"><span class="n">ImageGenerationResponse</span></code> object.</p>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_images</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">negative_prompt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">number_of_images</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">aspect_ratio</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;1:1&quot;</span><span class="p">,</span> <span class="s2">&quot;9:16&quot;</span><span class="p">,</span> <span class="s2">&quot;16:9&quot;</span><span class="p">,</span> <span class="s2">&quot;4:3&quot;</span><span class="p">,</span> <span class="s2">&quot;3:4&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">guidance_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_watermark</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">safety_filter_level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;block_most&quot;</span><span class="p">,</span> <span class="s2">&quot;block_some&quot;</span><span class="p">,</span> <span class="s2">&quot;block_few&quot;</span><span class="p">,</span> <span class="s2">&quot;block_fewest&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">person_generation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;dont_allow&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_adult&quot;</span><span class="p">,</span> <span class="s2">&quot;allow_all&quot;</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ImageGenerationResponse&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates images from text prompt.</span>

<span class="sd">    Args:</span>
<span class="sd">        prompt: Text prompt for the image.</span>
<span class="sd">        negative_prompt: A description of what you want to omit in the generated</span>
<span class="sd">            images.</span>
<span class="sd">        number_of_images: Number of images to generate. Range: 1..8.</span>
<span class="sd">        aspect_ratio: Changes the aspect ratio of the generated image Supported</span>
<span class="sd">            values are:</span>
<span class="sd">            * &quot;1:1&quot; : 1:1 aspect ratio</span>
<span class="sd">            * &quot;9:16&quot; : 9:16 aspect ratio</span>
<span class="sd">            * &quot;16:9&quot; : 16:9 aspect ratio</span>
<span class="sd">            * &quot;4:3&quot; : 4:3 aspect ratio</span>
<span class="sd">            * &quot;3:4&quot; : 3:4 aspect_ratio</span>
<span class="sd">        guidance_scale: Controls the strength of the prompt. Suggested values are:</span>
<span class="sd">            * 0-9 (low strength)</span>
<span class="sd">            * 10-20 (medium strength)</span>
<span class="sd">            * 21+ (high strength)</span>
<span class="sd">        language: Language of the text prompt for the image. Default: None.</span>
<span class="sd">            Supported values are `&quot;en&quot;` for English, `&quot;hi&quot;` for Hindi, `&quot;ja&quot;`</span>
<span class="sd">            for Japanese, `&quot;ko&quot;` for Korean, and `&quot;auto&quot;` for automatic language</span>
<span class="sd">            detection.</span>
<span class="sd">        seed: Image generation random seed.</span>
<span class="sd">        output_gcs_uri: Google Cloud Storage uri to store the generated images.</span>
<span class="sd">        add_watermark: Add a watermark to the generated image</span>
<span class="sd">        safety_filter_level: Adds a filter level to Safety filtering. Supported</span>
<span class="sd">            values are:</span>
<span class="sd">            * &quot;block_most&quot; : Strongest filtering level, most strict</span>
<span class="sd">            blocking</span>
<span class="sd">            * &quot;block_some&quot; : Block some problematic prompts and responses</span>
<span class="sd">            * &quot;block_few&quot; : Block fewer problematic prompts and responses</span>
<span class="sd">            * &quot;block_fewest&quot; : Block very few problematic prompts and responses</span>
<span class="sd">        person_generation: Allow generation of people by the model Supported</span>
<span class="sd">            values are:</span>
<span class="sd">            * &quot;dont_allow&quot; : Block generation of people</span>
<span class="sd">            * &quot;allow_adult&quot; : Generate adults, but not children</span>
<span class="sd">            * &quot;allow_all&quot; : Generate adults and children</span>
<span class="sd">    Returns:</span>
<span class="sd">        An `ImageGenerationResponse` object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_images</span><span class="p">(</span>
        <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
        <span class="n">negative_prompt</span><span class="o">=</span><span class="n">negative_prompt</span><span class="p">,</span>
        <span class="n">number_of_images</span><span class="o">=</span><span class="n">number_of_images</span><span class="p">,</span>
        <span class="n">aspect_ratio</span><span class="o">=</span><span class="n">aspect_ratio</span><span class="p">,</span>
        <span class="n">guidance_scale</span><span class="o">=</span><span class="n">guidance_scale</span><span class="p">,</span>
        <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
        <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
        <span class="n">output_gcs_uri</span><span class="o">=</span><span class="n">output_gcs_uri</span><span class="p">,</span>
        <span class="n">add_watermark</span><span class="o">=</span><span class="n">add_watermark</span><span class="p">,</span>
        <span class="n">safety_filter_level</span><span class="o">=</span><span class="n">safety_filter_level</span><span class="p">,</span>
        <span class="n">person_generation</span><span class="o">=</span><span class="n">person_generation</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.ImageGenerationModel.upscale_image" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">upscale_image</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">upscale_image</span><span class="p">(</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Image</span><span class="p">,</span> <span class="n">GeneratedImage</span><span class="p">],</span>
    <span class="n">new_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">,</span>
    <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Upscales an image.</p>
<p>This supports upscaling images generated through the <code class="language-python highlight"><span class="n">generate_images</span><span class="p">()</span></code> method,
or upscaling a new image that is 1024x1024.</p>
<p>Examples::</p>
<div class="language-text highlight"><pre><span></span><code># Upscale a generated image
model = ImageGenerationModel.from_pretrained(&quot;imagegeneration@002&quot;)
response = model.generate_images(
    prompt=&quot;Astronaut riding a horse&quot;,
)
model.upscale_image(image=response[0])

# Upscale a new 1024x1024 image
my_image = Image.load_from_file(&quot;my-image.png&quot;)
model.upscale_image(image=my_image)
</code></pre></div>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>image</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Required. The generated image to upscale.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.GeneratedImage" href="#vertexai.preview.vision_models.GeneratedImage">GeneratedImage</a>, <a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>new_size</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The size of the biggest dimension of the upscaled image. Only 2048 and 4096 are currently
supported. Results in a 2048x2048 or 4096x4096 image. Defaults to 2048 if not provided.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>2048</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>output_gcs_uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Google Cloud Storage uri to store the upscaled images.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An <code class="language-python highlight"><span class="n">Image</span></code> object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">upscale_image</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">,</span> <span class="s2">&quot;GeneratedImage&quot;</span><span class="p">],</span>
    <span class="n">new_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">,</span>
    <span class="n">output_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Image&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Upscales an image.</span>

<span class="sd">    This supports upscaling images generated through the `generate_images()` method,</span>
<span class="sd">    or upscaling a new image that is 1024x1024.</span>

<span class="sd">    Examples::</span>

<span class="sd">        # Upscale a generated image</span>
<span class="sd">        model = ImageGenerationModel.from_pretrained(&quot;imagegeneration@002&quot;)</span>
<span class="sd">        response = model.generate_images(</span>
<span class="sd">            prompt=&quot;Astronaut riding a horse&quot;,</span>
<span class="sd">        )</span>
<span class="sd">        model.upscale_image(image=response[0])</span>

<span class="sd">        # Upscale a new 1024x1024 image</span>
<span class="sd">        my_image = Image.load_from_file(&quot;my-image.png&quot;)</span>
<span class="sd">        model.upscale_image(image=my_image)</span>

<span class="sd">    Args:</span>
<span class="sd">        image (Union[GeneratedImage, Image]):</span>
<span class="sd">            Required. The generated image to upscale.</span>
<span class="sd">        new_size (int):</span>
<span class="sd">            The size of the biggest dimension of the upscaled image. Only 2048 and 4096 are currently</span>
<span class="sd">            supported. Results in a 2048x2048 or 4096x4096 image. Defaults to 2048 if not provided.</span>
<span class="sd">        output_gcs_uri: Google Cloud Storage uri to store the upscaled images.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An `Image` object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Currently this method only supports 1024x1024 images</span>
    <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1024</span> <span class="ow">and</span> <span class="n">image</span><span class="o">.</span><span class="n">_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1024</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Upscaling is currently only supported on images that are 1024x1024.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">new_size</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_SUPPORTED_UPSCALING_SIZES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Only the folowing square upscaling sizes are currently supported: </span><span class="si">{</span><span class="n">_SUPPORTED_UPSCALING_SIZES</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="n">instance</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="p">}</span>

    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;sampleImageSize&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">new_size</span><span class="p">),</span>
        <span class="s2">&quot;sampleCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;upscale&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">output_gcs_uri</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;storageUri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_gcs_uri</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
        <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">upscaled_image</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">GeneratedImage</span><span class="p">):</span>
        <span class="n">generation_parameters</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">generation_parameters</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">generation_parameters</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">generation_parameters</span><span class="p">[</span><span class="s2">&quot;upscaled_image_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_size</span>

    <span class="n">encoded_bytes</span> <span class="o">=</span> <span class="n">upscaled_image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">GeneratedImage</span><span class="p">(</span>
        <span class="n">image_bytes</span><span class="o">=</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">encoded_bytes</span><span class="p">)</span> <span class="k">if</span> <span class="n">encoded_bytes</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">generation_parameters</span><span class="o">=</span><span class="n">generation_parameters</span><span class="p">,</span>
        <span class="n">gcs_uri</span><span class="o">=</span><span class="n">upscaled_image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gcsUri&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.ImageGenerationResponse" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ImageGenerationResponse</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


      <p>Image generation response.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="vertexai.preview.vision_models.ImageGenerationResponse.images">images</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The list of generated images.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.GeneratedImage" href="#vertexai.preview.vision_models.GeneratedImage">GeneratedImage</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
<span class="k">class</span> <span class="nc">ImageGenerationResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Image generation response.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        images: The list of generated images.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.preview.vision_models&quot;</span>

    <span class="n">images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;GeneratedImage&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;GeneratedImage&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterates through the generated images.&quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;GeneratedImage&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the generated image by index.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.ImageGenerationResponse.__getitem__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__getitem__</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="fm">__getitem__</span><span class="p">(</span><span class="nf">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeneratedImage</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Gets the generated image by index.</p>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;GeneratedImage&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the generated image by index.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.ImageGenerationResponse.__iter__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__iter__</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="fm">__iter__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nf">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">GeneratedImage</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Iterates through the generated images.</p>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;GeneratedImage&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterates through the generated images.&quot;&quot;&quot;</span>
    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.ImageQnAModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ImageQnAModel</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="vertexai._model_garden._model_garden_models._ModelGardenModel">_ModelGardenModel</span></code></p>


      <p>Answers questions about an image.</p>
<p>Examples::</p>
<div class="language-text highlight"><pre><span></span><code>model = ImageQnAModel.from_pretrained(&quot;imagetext@001&quot;)
image = Image.load_from_file(&quot;image.png&quot;)
answers = model.ask_question(
    image=image,
    question=&quot;What color is the car in this image?&quot;,
    # Optional:
    number_of_results=1,
)
</code></pre></div>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ImageQnAModel</span><span class="p">(</span>
    <span class="n">_model_garden_models</span><span class="o">.</span><span class="n">_ModelGardenModel</span>  <span class="c1"># pylint: disable=protected-access</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Answers questions about an image.</span>

<span class="sd">    Examples::</span>

<span class="sd">        model = ImageQnAModel.from_pretrained(&quot;imagetext@001&quot;)</span>
<span class="sd">        image = Image.load_from_file(&quot;image.png&quot;)</span>
<span class="sd">        answers = model.ask_question(</span>
<span class="sd">            image=image,</span>
<span class="sd">            question=&quot;What color is the car in this image?&quot;,</span>
<span class="sd">            # Optional:</span>
<span class="sd">            number_of_results=1,</span>
<span class="sd">        )</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="n">_INSTANCE_SCHEMA_URI</span> <span class="o">=</span> <span class="s2">&quot;gs://google-cloud-aiplatform/schema/predict/instance/vision_reasoning_model_1.0.0.yaml&quot;</span>

    <span class="k">def</span> <span class="nf">ask_question</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">,</span>
        <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">number_of_results</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Answers questions about an image.</span>

<span class="sd">        Args:</span>
<span class="sd">            image: The image to get captions for. Size limit: 10 MB.</span>
<span class="sd">            question: Question to ask about the image.</span>
<span class="sd">            number_of_results: Number of captions to produce. Range: 1-3.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of answers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">question</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;sampleCount&quot;</span><span class="p">:</span> <span class="n">number_of_results</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.ImageQnAModel.ask_question" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">ask_question</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">ask_question</span><span class="p">(</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">,</span>
    <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">number_of_results</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Answers questions about an image.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>image</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The image to get captions for. Size limit: 10 MB.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>question</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Question to ask about the image.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>number_of_results</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Number of captions to produce. Range: 1-3.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>1</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[str]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A list of answers.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ask_question</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">,</span>
    <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">number_of_results</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Answers questions about an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image: The image to get captions for. Size limit: 10 MB.</span>
<span class="sd">        question: Question to ask about the image.</span>
<span class="sd">        number_of_results: Number of captions to produce. Range: 1-3.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of answers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">question</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="p">}</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;sampleCount&quot;</span><span class="p">:</span> <span class="n">number_of_results</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
        <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.ImageTextModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ImageTextModel</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.ImageCaptioningModel" href="#vertexai.preview.vision_models.ImageCaptioningModel">ImageCaptioningModel</a></code>, <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.ImageQnAModel" href="#vertexai.preview.vision_models.ImageQnAModel">ImageQnAModel</a></code></p>


      <p>Generates text from images.</p>
<p>Examples::</p>
<div class="language-text highlight"><pre><span></span><code>model = ImageTextModel.from_pretrained(&quot;imagetext@001&quot;)
image = Image.load_from_file(&quot;image.png&quot;)

captions = model.get_captions(
    image=image,
    # Optional:
    number_of_results=1,
    language=&quot;en&quot;,
)

answers = model.ask_question(
    image=image,
    question=&quot;What color is the car in this image?&quot;,
    # Optional:
    number_of_results=1,
)
</code></pre></div>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ImageTextModel</span><span class="p">(</span><span class="n">ImageCaptioningModel</span><span class="p">,</span> <span class="n">ImageQnAModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates text from images.</span>

<span class="sd">    Examples::</span>

<span class="sd">        model = ImageTextModel.from_pretrained(&quot;imagetext@001&quot;)</span>
<span class="sd">        image = Image.load_from_file(&quot;image.png&quot;)</span>

<span class="sd">        captions = model.get_captions(</span>
<span class="sd">            image=image,</span>
<span class="sd">            # Optional:</span>
<span class="sd">            number_of_results=1,</span>
<span class="sd">            language=&quot;en&quot;,</span>
<span class="sd">        )</span>

<span class="sd">        answers = model.ask_question(</span>
<span class="sd">            image=image,</span>
<span class="sd">            question=&quot;What color is the car in this image?&quot;,</span>
<span class="sd">            # Optional:</span>
<span class="sd">            number_of_results=1,</span>
<span class="sd">        )</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="c1"># NOTE: Using this ImageTextModel class is recommended over using ImageQnAModel or ImageCaptioningModel,</span>
    <span class="c1"># since SDK Model Garden classes should follow the design pattern of exactly 1 SDK class to 1 Model Garden schema URI</span>

    <span class="n">_INSTANCE_SCHEMA_URI</span> <span class="o">=</span> <span class="s2">&quot;gs://google-cloud-aiplatform/schema/predict/instance/vision_reasoning_model_1.0.0.yaml&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.MultiModalEmbeddingModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">MultiModalEmbeddingModel</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="vertexai._model_garden._model_garden_models._ModelGardenModel">_ModelGardenModel</span></code></p>


      <p>Generates embedding vectors from images and videos.</p>
<p>Examples::</p>
<div class="language-text highlight"><pre><span></span><code>model = MultiModalEmbeddingModel.from_pretrained(&quot;multimodalembedding@001&quot;)
image = Image.load_from_file(&quot;image.png&quot;)
video = Video.load_from_file(&quot;video.mp4&quot;)

embeddings = model.get_embeddings(
    image=image,
    video=video,
    contextual_text=&quot;Hello world&quot;,
)
image_embedding = embeddings.image_embedding
video_embeddings = embeddings.video_embeddings
text_embedding = embeddings.text_embedding
</code></pre></div>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MultiModalEmbeddingModel</span><span class="p">(</span><span class="n">_model_garden_models</span><span class="o">.</span><span class="n">_ModelGardenModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates embedding vectors from images and videos.</span>

<span class="sd">    Examples::</span>

<span class="sd">        model = MultiModalEmbeddingModel.from_pretrained(&quot;multimodalembedding@001&quot;)</span>
<span class="sd">        image = Image.load_from_file(&quot;image.png&quot;)</span>
<span class="sd">        video = Video.load_from_file(&quot;video.mp4&quot;)</span>

<span class="sd">        embeddings = model.get_embeddings(</span>
<span class="sd">            image=image,</span>
<span class="sd">            video=video,</span>
<span class="sd">            contextual_text=&quot;Hello world&quot;,</span>
<span class="sd">        )</span>
<span class="sd">        image_embedding = embeddings.image_embedding</span>
<span class="sd">        video_embeddings = embeddings.video_embeddings</span>
<span class="sd">        text_embedding = embeddings.text_embedding</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="n">_INSTANCE_SCHEMA_URI</span> <span class="o">=</span> <span class="s2">&quot;gs://google-cloud-aiplatform/schema/predict/instance/vision_embedding_model_1.0.0.yaml&quot;</span>

    <span class="k">def</span> <span class="nf">get_embeddings</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Image</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">video</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Video</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contextual_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dimension</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">video_segment_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VideoSegmentConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;MultiModalEmbeddingResponse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets embedding vectors from the provided image.</span>

<span class="sd">        Args:</span>
<span class="sd">            image (Image): Optional. The image to generate embeddings for. One of</span>
<span class="sd">              `image`, `video`, or `contextual_text` is required.</span>
<span class="sd">            video (Video): Optional. The video to generate embeddings for. One of</span>
<span class="sd">              `image`, `video` or `contextual_text` is required.</span>
<span class="sd">            contextual_text (str): Optional. Contextual text for your input image or video.</span>
<span class="sd">              If provided, the model will also generate an embedding vector for the</span>
<span class="sd">              provided contextual text. The returned image and text embedding</span>
<span class="sd">              vectors are in the same semantic space with the same dimensionality,</span>
<span class="sd">              and the vectors can be used interchangeably for use cases like</span>
<span class="sd">              searching image by text or searching text by image. One of `image`, `video` or</span>
<span class="sd">              `contextual_text` is required.</span>
<span class="sd">            dimension (int): Optional. The number of embedding dimensions. Lower</span>
<span class="sd">              values offer decreased latency when using these embeddings for</span>
<span class="sd">              subsequent tasks, while higher values offer better accuracy.</span>
<span class="sd">              Available values: `128`, `256`, `512`, and `1408` (default).</span>
<span class="sd">            video_segment_config (VideoSegmentConfig): Optional. The specific</span>
<span class="sd">              video segments (in seconds) the embeddings are generated for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MultiModalEmbeddingResponse:</span>
<span class="sd">                The image and text embedding vectors.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">video</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">contextual_text</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;One of `image`, `video`, or `contextual_text` is required.&quot;</span>
            <span class="p">)</span>

        <span class="n">instance</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">image</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="p">}</span>

        <span class="k">if</span> <span class="n">video</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">video</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;video&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">video</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;video&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">video</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
                <span class="p">}</span>  <span class="c1"># pylint: disable=protected-access</span>

            <span class="k">if</span> <span class="n">video_segment_config</span><span class="p">:</span>
                <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;video&quot;</span><span class="p">][</span><span class="s2">&quot;videoSegmentConfig&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;startOffsetSec&quot;</span><span class="p">:</span> <span class="n">video_segment_config</span><span class="o">.</span><span class="n">start_offset_sec</span><span class="p">,</span>
                    <span class="s2">&quot;endOffsetSec&quot;</span><span class="p">:</span> <span class="n">video_segment_config</span><span class="o">.</span><span class="n">end_offset_sec</span><span class="p">,</span>
                    <span class="s2">&quot;intervalSec&quot;</span><span class="p">:</span> <span class="n">video_segment_config</span><span class="o">.</span><span class="n">interval_sec</span><span class="p">,</span>
                <span class="p">}</span>

        <span class="k">if</span> <span class="n">contextual_text</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contextual_text</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">dimension</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;dimension&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dimension</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">image_embedding</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;imageEmbedding&quot;</span><span class="p">)</span>
        <span class="n">video_embeddings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">video_embedding</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;videoEmbeddings&quot;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">video_embeddings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">VideoEmbedding</span><span class="p">(</span>
                    <span class="n">embedding</span><span class="o">=</span><span class="n">video_embedding</span><span class="p">[</span><span class="s2">&quot;embedding&quot;</span><span class="p">],</span>
                    <span class="n">start_offset_sec</span><span class="o">=</span><span class="n">video_embedding</span><span class="p">[</span><span class="s2">&quot;startOffsetSec&quot;</span><span class="p">],</span>
                    <span class="n">end_offset_sec</span><span class="o">=</span><span class="n">video_embedding</span><span class="p">[</span><span class="s2">&quot;endOffsetSec&quot;</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="n">text_embedding</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;textEmbedding&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;textEmbedding&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">MultiModalEmbeddingResponse</span><span class="p">(</span>
            <span class="n">image_embedding</span><span class="o">=</span><span class="n">image_embedding</span><span class="p">,</span>
            <span class="n">video_embeddings</span><span class="o">=</span><span class="n">video_embeddings</span><span class="p">,</span>
            <span class="n">_prediction_response</span><span class="o">=</span><span class="n">response</span><span class="p">,</span>
            <span class="n">text_embedding</span><span class="o">=</span><span class="n">text_embedding</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.MultiModalEmbeddingModel.get_embeddings" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_embeddings</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">get_embeddings</span><span class="p">(</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Image</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">video</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Video</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">contextual_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dimension</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">video_segment_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">VideoSegmentConfig</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MultiModalEmbeddingResponse</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Gets embedding vectors from the provided image.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>image</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional. The image to generate embeddings for. One of
<code class="language-python highlight"><span class="n">image</span></code>, <code class="language-python highlight"><span class="n">video</span></code>, or <code class="language-python highlight"><span class="n">contextual_text</span></code> is required.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>video</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional. The video to generate embeddings for. One of
<code class="language-python highlight"><span class="n">image</span></code>, <code class="language-python highlight"><span class="n">video</span></code> or <code class="language-python highlight"><span class="n">contextual_text</span></code> is required.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Video" href="#vertexai.preview.vision_models.Video">Video</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>contextual_text</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional. Contextual text for your input image or video.
If provided, the model will also generate an embedding vector for the
provided contextual text. The returned image and text embedding
vectors are in the same semantic space with the same dimensionality,
and the vectors can be used interchangeably for use cases like
searching image by text or searching text by image. One of <code class="language-python highlight"><span class="n">image</span></code>, <code class="language-python highlight"><span class="n">video</span></code> or
<code class="language-python highlight"><span class="n">contextual_text</span></code> is required.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dimension</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional. The number of embedding dimensions. Lower
values offer decreased latency when using these embeddings for
subsequent tasks, while higher values offer better accuracy.
Available values: <code class="language-python highlight"><span class="mi">128</span></code>, <code class="language-python highlight"><span class="mi">256</span></code>, <code class="language-python highlight"><span class="mi">512</span></code>, and <code class="language-python highlight"><span class="mi">1408</span></code> (default).</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>video_segment_config</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional. The specific
video segments (in seconds) the embeddings are generated for.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.VideoSegmentConfig" href="#vertexai.preview.vision_models.VideoSegmentConfig">VideoSegmentConfig</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>MultiModalEmbeddingResponse</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The image and text embedding vectors.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.MultiModalEmbeddingResponse" href="#vertexai.preview.vision_models.MultiModalEmbeddingResponse">MultiModalEmbeddingResponse</a></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_embeddings</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Image</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">video</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Video</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">contextual_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dimension</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">video_segment_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VideoSegmentConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;MultiModalEmbeddingResponse&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets embedding vectors from the provided image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (Image): Optional. The image to generate embeddings for. One of</span>
<span class="sd">          `image`, `video`, or `contextual_text` is required.</span>
<span class="sd">        video (Video): Optional. The video to generate embeddings for. One of</span>
<span class="sd">          `image`, `video` or `contextual_text` is required.</span>
<span class="sd">        contextual_text (str): Optional. Contextual text for your input image or video.</span>
<span class="sd">          If provided, the model will also generate an embedding vector for the</span>
<span class="sd">          provided contextual text. The returned image and text embedding</span>
<span class="sd">          vectors are in the same semantic space with the same dimensionality,</span>
<span class="sd">          and the vectors can be used interchangeably for use cases like</span>
<span class="sd">          searching image by text or searching text by image. One of `image`, `video` or</span>
<span class="sd">          `contextual_text` is required.</span>
<span class="sd">        dimension (int): Optional. The number of embedding dimensions. Lower</span>
<span class="sd">          values offer decreased latency when using these embeddings for</span>
<span class="sd">          subsequent tasks, while higher values offer better accuracy.</span>
<span class="sd">          Available values: `128`, `256`, `512`, and `1408` (default).</span>
<span class="sd">        video_segment_config (VideoSegmentConfig): Optional. The specific</span>
<span class="sd">          video segments (in seconds) the embeddings are generated for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MultiModalEmbeddingResponse:</span>
<span class="sd">            The image and text embedding vectors.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">video</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">contextual_text</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;One of `image`, `video`, or `contextual_text` is required.&quot;</span>
        <span class="p">)</span>

    <span class="n">instance</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">image</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>

    <span class="k">if</span> <span class="n">video</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">video</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;video&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">video</span><span class="o">.</span><span class="n">_gcs_uri</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;video&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">video</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">}</span>  <span class="c1"># pylint: disable=protected-access</span>

        <span class="k">if</span> <span class="n">video_segment_config</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;video&quot;</span><span class="p">][</span><span class="s2">&quot;videoSegmentConfig&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;startOffsetSec&quot;</span><span class="p">:</span> <span class="n">video_segment_config</span><span class="o">.</span><span class="n">start_offset_sec</span><span class="p">,</span>
                <span class="s2">&quot;endOffsetSec&quot;</span><span class="p">:</span> <span class="n">video_segment_config</span><span class="o">.</span><span class="n">end_offset_sec</span><span class="p">,</span>
                <span class="s2">&quot;intervalSec&quot;</span><span class="p">:</span> <span class="n">video_segment_config</span><span class="o">.</span><span class="n">interval_sec</span><span class="p">,</span>
            <span class="p">}</span>

    <span class="k">if</span> <span class="n">contextual_text</span><span class="p">:</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contextual_text</span>

    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">dimension</span><span class="p">:</span>
        <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;dimension&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dimension</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
        <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">image_embedding</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;imageEmbedding&quot;</span><span class="p">)</span>
    <span class="n">video_embeddings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">video_embedding</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;videoEmbeddings&quot;</span><span class="p">,</span> <span class="p">[]):</span>
        <span class="n">video_embeddings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">VideoEmbedding</span><span class="p">(</span>
                <span class="n">embedding</span><span class="o">=</span><span class="n">video_embedding</span><span class="p">[</span><span class="s2">&quot;embedding&quot;</span><span class="p">],</span>
                <span class="n">start_offset_sec</span><span class="o">=</span><span class="n">video_embedding</span><span class="p">[</span><span class="s2">&quot;startOffsetSec&quot;</span><span class="p">],</span>
                <span class="n">end_offset_sec</span><span class="o">=</span><span class="n">video_embedding</span><span class="p">[</span><span class="s2">&quot;endOffsetSec&quot;</span><span class="p">],</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="n">text_embedding</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;textEmbedding&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;textEmbedding&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">MultiModalEmbeddingResponse</span><span class="p">(</span>
        <span class="n">image_embedding</span><span class="o">=</span><span class="n">image_embedding</span><span class="p">,</span>
        <span class="n">video_embeddings</span><span class="o">=</span><span class="n">video_embeddings</span><span class="p">,</span>
        <span class="n">_prediction_response</span><span class="o">=</span><span class="n">response</span><span class="p">,</span>
        <span class="n">text_embedding</span><span class="o">=</span><span class="n">text_embedding</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.MultiModalEmbeddingResponse" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">MultiModalEmbeddingResponse</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


      <p>The multimodal embedding response.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="vertexai.preview.vision_models.MultiModalEmbeddingResponse.image_embedding">image_embedding</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Optional. The embedding vector generated from your image.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[float]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="vertexai.preview.vision_models.MultiModalEmbeddingResponse.video_embeddings">video_embeddings</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Optional. The embedding vectors generated from your video.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.VideoEmbedding" href="#vertexai.preview.vision_models.VideoEmbedding">VideoEmbedding</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="vertexai.preview.vision_models.MultiModalEmbeddingResponse.text_embedding">text_embedding</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Optional. The embedding vector generated from the contextual text provided for your image or video.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[float]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
<span class="k">class</span> <span class="nc">MultiModalEmbeddingResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The multimodal embedding response.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        image_embedding (List[float]):</span>
<span class="sd">            Optional. The embedding vector generated from your image.</span>
<span class="sd">        video_embeddings (List[VideoEmbedding]):</span>
<span class="sd">            Optional. The embedding vectors generated from your video.</span>
<span class="sd">        text_embedding (List[float]):</span>
<span class="sd">            Optional. The embedding vector generated from the contextual text provided for your image or video.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="n">_prediction_response</span><span class="p">:</span> <span class="n">Any</span>
    <span class="n">image_embedding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">video_embeddings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">VideoEmbedding</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">text_embedding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.Video" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Video</span>


</h2>


    <div class="doc doc-contents ">


      <p>Video.</p>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Video</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Video.&quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="n">_loaded_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">video_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an `Image` object.</span>

<span class="sd">        Args:</span>
<span class="sd">            video_bytes: Video file bytes. Video can be in AVI, FLV, MKV, MOV,</span>
<span class="sd">                MP4, MPEG, MPG, WEBM, and WMV formats.</span>
<span class="sd">            gcs_uri: Image URI in Google Cloud Storage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">video_bytes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">(</span><span class="n">gcs_uri</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either video_bytes or gcs_uri must be provided.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_video_bytes</span> <span class="o">=</span> <span class="n">video_bytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span> <span class="o">=</span> <span class="n">gcs_uri</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Video&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads video from local file or Google Cloud Storage.</span>

<span class="sd">        Args:</span>
<span class="sd">            location: Local path or Google Cloud Storage uri from where to load</span>
<span class="sd">                the video.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Loaded video as an `Video` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">location</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;gs://&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Video</span><span class="p">(</span><span class="n">gcs_uri</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>

        <span class="n">video_bytes</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">()</span>
        <span class="n">video</span> <span class="o">=</span> <span class="n">Video</span><span class="p">(</span><span class="n">video_bytes</span><span class="o">=</span><span class="n">video_bytes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">video</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">storage</span><span class="o">.</span><span class="n">Blob</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;_blob is only supported when gcs_uri is set.&quot;</span><span class="p">)</span>
        <span class="n">storage_client</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span>
            <span class="n">credentials</span><span class="o">=</span><span class="n">aiplatform_initializer</span><span class="o">.</span><span class="n">global_config</span><span class="o">.</span><span class="n">credentials</span>
        <span class="p">)</span>
        <span class="n">blob</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">Blob</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">storage_client</span><span class="p">)</span>
        <span class="c1"># Needed to populate `blob.content_type`</span>
        <span class="n">blob</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">blob</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_video_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_bytes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_blob</span><span class="o">.</span><span class="n">download_as_bytes</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_bytes</span>

    <span class="nd">@_video_bytes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">_video_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_bytes</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_mime_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the MIME type of the video.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_blob</span><span class="o">.</span><span class="n">content_type</span>
        <span class="c1"># Fall back to mp4</span>
        <span class="k">return</span> <span class="s2">&quot;video/mp4&quot;</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves video to a file.</span>

<span class="sd">        Args:</span>
<span class="sd">            location: Local path where to save the video.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_video_bytes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_as_base64_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Encodes video using the base64 encoding.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Base64 encoding of the video as a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># ! b64encode returns `bytes` object, not `str`.</span>
        <span class="c1"># We need to convert `bytes` to `str`, otherwise we get service error:</span>
        <span class="c1"># &quot;received initial metadata size exceeds limit&quot;</span>
        <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_video_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.Video.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
    <span class="nf">video_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>video_bytes</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Video file bytes. Video can be in AVI, FLV, MKV, MOV,
MP4, MPEG, MPG, WEBM, and WMV formats.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[bytes]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>gcs_uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Image URI in Google Cloud Storage.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">video_bytes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">gcs_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates an `Image` object.</span>

<span class="sd">    Args:</span>
<span class="sd">        video_bytes: Video file bytes. Video can be in AVI, FLV, MKV, MOV,</span>
<span class="sd">            MP4, MPEG, MPG, WEBM, and WMV formats.</span>
<span class="sd">        gcs_uri: Image URI in Google Cloud Storage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">video_bytes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">(</span><span class="n">gcs_uri</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either video_bytes or gcs_uri must be provided.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_video_bytes</span> <span class="o">=</span> <span class="n">video_bytes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_gcs_uri</span> <span class="o">=</span> <span class="n">gcs_uri</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.Video.load_from_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_from_file</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Video</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Loads video from local file or Google Cloud Storage.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>location</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Local path or Google Cloud Storage uri from where to load
the video.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Video" href="#vertexai.preview.vision_models.Video">Video</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Loaded video as an <code class="language-python highlight"><span class="n">Video</span></code> object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">load_from_file</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Video&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads video from local file or Google Cloud Storage.</span>

<span class="sd">    Args:</span>
<span class="sd">        location: Local path or Google Cloud Storage uri from where to load</span>
<span class="sd">            the video.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Loaded video as an `Video` object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">location</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;gs://&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Video</span><span class="p">(</span><span class="n">gcs_uri</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>

    <span class="n">video_bytes</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">()</span>
    <span class="n">video</span> <span class="o">=</span> <span class="n">Video</span><span class="p">(</span><span class="n">video_bytes</span><span class="o">=</span><span class="n">video_bytes</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">video</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.Video.save" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">save</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">save</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Saves video to a file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>location</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Local path where to save the video.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Saves video to a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        location: Local path where to save the video.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_video_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.VideoEmbedding" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VideoEmbedding</span>


</h2>


    <div class="doc doc-contents ">


      <p>Embeddings generated from video with offset times.</p>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VideoEmbedding</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Embeddings generated from video with offset times.&quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="n">start_offset_sec</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">end_offset_sec</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">embedding</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">start_offset_sec</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end_offset_sec</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">embedding</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a `VideoEmbedding` object.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_offset_sec: Start time offset (in seconds) of generated embeddings.</span>
<span class="sd">            end_offset_sec: End time offset (in seconds) of generated embeddings.</span>
<span class="sd">            embedding: Generated embedding for interval.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_offset_sec</span> <span class="o">=</span> <span class="n">start_offset_sec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_offset_sec</span> <span class="o">=</span> <span class="n">end_offset_sec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">embedding</span> <span class="o">=</span> <span class="n">embedding</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.VideoEmbedding.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
    <span class="nf">start_offset_sec</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">end_offset_sec</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">embedding</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>start_offset_sec</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Start time offset (in seconds) of generated embeddings.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>end_offset_sec</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>End time offset (in seconds) of generated embeddings.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>embedding</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Generated embedding for interval.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[float]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">start_offset_sec</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end_offset_sec</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">embedding</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a `VideoEmbedding` object.</span>

<span class="sd">    Args:</span>
<span class="sd">        start_offset_sec: Start time offset (in seconds) of generated embeddings.</span>
<span class="sd">        end_offset_sec: End time offset (in seconds) of generated embeddings.</span>
<span class="sd">        embedding: Generated embedding for interval.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_offset_sec</span> <span class="o">=</span> <span class="n">start_offset_sec</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_offset_sec</span> <span class="o">=</span> <span class="n">end_offset_sec</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">embedding</span> <span class="o">=</span> <span class="n">embedding</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.VideoSegmentConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VideoSegmentConfig</span>


</h2>


    <div class="doc doc-contents ">


      <p>The specific video segments (in seconds) the embeddings are generated for.</p>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VideoSegmentConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The specific video segments (in seconds) the embeddings are generated for.&quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.vision_models&quot;</span>

    <span class="n">start_offset_sec</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">end_offset_sec</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">interval_sec</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">start_offset_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">end_offset_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">120</span><span class="p">,</span>
        <span class="n">interval_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a `VideoSegmentConfig` object.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_offset_sec: Start time offset (in seconds) to generate embeddings for.</span>
<span class="sd">            end_offset_sec: End time offset (in seconds) to generate embeddings for.</span>
<span class="sd">            interval_sec: Interval to divide video for generated embeddings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_offset_sec</span> <span class="o">=</span> <span class="n">start_offset_sec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_offset_sec</span> <span class="o">=</span> <span class="n">end_offset_sec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interval_sec</span> <span class="o">=</span> <span class="n">interval_sec</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.VideoSegmentConfig.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
    <span class="nf">start_offset_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">end_offset_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">120</span><span class="p">,</span>
    <span class="n">interval_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>start_offset_sec</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Start time offset (in seconds) to generate embeddings for.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>end_offset_sec</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>End time offset (in seconds) to generate embeddings for.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>120</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>interval_sec</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Interval to divide video for generated embeddings.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>16</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">start_offset_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">end_offset_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">120</span><span class="p">,</span>
    <span class="n">interval_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a `VideoSegmentConfig` object.</span>

<span class="sd">    Args:</span>
<span class="sd">        start_offset_sec: Start time offset (in seconds) to generate embeddings for.</span>
<span class="sd">        end_offset_sec: End time offset (in seconds) to generate embeddings for.</span>
<span class="sd">        interval_sec: Interval to divide video for generated embeddings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_offset_sec</span> <span class="o">=</span> <span class="n">start_offset_sec</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_offset_sec</span> <span class="o">=</span> <span class="n">end_offset_sec</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interval_sec</span> <span class="o">=</span> <span class="n">interval_sec</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="vertexai.preview.vision_models.WatermarkVerificationModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">WatermarkVerificationModel</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="vertexai._model_garden._model_garden_models._ModelGardenModel">_ModelGardenModel</span></code></p>


      <p>Verifies if an image has a watermark.</p>

              <details class="quote">
                <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WatermarkVerificationModel</span><span class="p">(</span><span class="n">_model_garden_models</span><span class="o">.</span><span class="n">_ModelGardenModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies if an image has a watermark.&quot;&quot;&quot;</span>

    <span class="vm">__module__</span> <span class="o">=</span> <span class="s2">&quot;vertexai.preview.vision_models&quot;</span>

    <span class="n">_INSTANCE_SCHEMA_URI</span> <span class="o">=</span> <span class="s2">&quot;gs://google-cloud-aiplatform/schema/predict/instance/watermark_verification_model_1.0.0.yaml&quot;</span>

    <span class="k">def</span> <span class="nf">verify_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WatermarkVerificationResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verifies the watermark of an image.</span>

<span class="sd">        Args:</span>
<span class="sd">            image: The image to verify.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A WatermarkVerificationResponse, containing the confidence level of</span>
<span class="sd">            the image being watermarked.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Image is required.&quot;</span><span class="p">)</span>

        <span class="n">instance</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()}</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
            <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">verification_likelihood</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;decision&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">WatermarkVerificationResponse</span><span class="p">(</span>
            <span class="n">_prediction_response</span><span class="o">=</span><span class="n">response</span><span class="p">,</span>
            <span class="n">watermark_verification_result</span><span class="o">=</span><span class="n">verification_likelihood</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="vertexai.preview.vision_models.WatermarkVerificationModel.verify_image" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">verify_image</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">verify_image</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WatermarkVerificationResponse</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Verifies the watermark of an image.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>image</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The image to verify.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="vertexai.vision_models._vision_models.Image" href="#vertexai.preview.vision_models.Image">Image</a></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="vertexai.vision_models._vision_models.WatermarkVerificationResponse">WatermarkVerificationResponse</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A WatermarkVerificationResponse, containing the confidence level of</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="vertexai.vision_models._vision_models.WatermarkVerificationResponse">WatermarkVerificationResponse</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>the image being watermarked.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>vertexai\vision_models\_vision_models.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">verify_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span> <span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WatermarkVerificationResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the watermark of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image: The image to verify.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A WatermarkVerificationResponse, containing the confidence level of</span>
<span class="sd">        the image being watermarked.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Image is required.&quot;</span><span class="p">)</span>

    <span class="n">instance</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">:</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;gcsUri&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_gcs_uri</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bytesBase64Encoded&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">_as_base64_string</span><span class="p">()}</span>

    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
        <span class="n">instances</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">verification_likelihood</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;decision&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">WatermarkVerificationResponse</span><span class="p">(</span>
        <span class="n">_prediction_response</span><span class="o">=</span><span class="n">response</span><span class="p">,</span>
        <span class="n">watermark_verification_result</span><span class="o">=</span><span class="n">verification_likelihood</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
    
  </body>
</html>